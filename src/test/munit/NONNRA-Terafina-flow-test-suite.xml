<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:munit="http://www.mulesoft.org/schema/mule/munit"
	xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<munit:config name="NONNRA-Terafina-flow-test-suite.xml" />
	<munit:test name="IDVOnlyAndSuccessScenario" description="Test" doc:id="f5fb059f-5d91-4913-b61b-6b34e71636c2" >
		<munit:behavior >
			<flow-ref doc:name="PinpointSuccessMockSub_Flow" doc:id="04f6b39d-651a-4fe5-9165-b15b176e327a" name="PinpointSuccessMockSub_Flow"/>
			<flow-ref doc:name="OFAC-Mock" doc:id="4ddb580a-091f-4013-8f04-4a7ce3fc0e4d" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="a411b469-f1be-4d4a-9af8-bbd86afa0380" name="PepMock"/>
			<munit-tools:mock-when doc:name="Mocking Promo Update" doc:id="874e6306-8319-438e-8a37-f3d97e2a28b5" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute attributeName="doc:id" whereValue="f307805f-045e-43b2-92fa-53dccc67236d" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="updatePromocodeResponse" value='#[output application/json --- ""]' mediaType="application/json" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<flow-ref doc:name="InstantIdAttentionMock" doc:id="9e835355-16fe-4822-94d7-6f1ffef31a96" name="InstantIdAttentionMock"/>
			<flow-ref doc:name="FISCheckingAccountTerafinaFlowMock" doc:id="5b35f55b-8a2b-4610-8fcc-2eccb4ca8318" name="FISCheckingAccountTerafinaFlowMock"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="dde9971a-633a-4103-81b7-faa85e19b217" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		
		<munit:execution >
			<ee:transform doc:name="SetPayload" doc:id="e82e8742-6371-4f8c-86f1-c9cb874bd8aa" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "PinPointRequest": [
    {
      "handler": "session_info",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "result": "pass",
      "channel": "online",
      "new_account_data": {
        "new_account": true,
        "first_name": "RIMAS",
        "last_name": "BROWN",
        "phone_number": "12077742915",
        "email": "ana@v.com"
      }
    },
    {
      "handler": "pinpoint_eval",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "activity": "new_account",
      "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
      "timestamp": "2019-01-29 07:21:24"
    }
  ],
  "IdVerificationRequest": {
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "Venue": "online"
    },
    "Person": {
      "Name": {
        "FirstName": "RIMAS",
        "LastName": "BROWN"
      },
      "Addresses": [
        {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip5": "02474-5106",
          "Country": "US",
          "Context": "primary"
        }
      ],
      "SSN": {
        "Number": "454545454",
        "Type": "ssn9"
      },
      "DateOfBirth": {
        "Year": "1987",
        "Month": "1",
        "Day": "1"
      },
      "Phones": [
        {
          "Number": "2077742915",
          "Context": "mobile"
        }
      ]
    }
  },
  "IdAuthenticationResponse": [],
  "RequestUUID": "a040x000002LtbaAAC",
  "CaseId": "",
  "CaseStatus": "",
  "ApplicationId": "APP-M-10332",
  "ApplicantType": "NONNRA",
  "Settings": {
    "AccountNumber": "45065",
    "Workflow": "public.testing.redherrings.open",
    "Mode": "testing",
    "Reference": "Reference1",
    "Locale": "en_US",
    "ConversationId": "31000095253376",
    "Venue": "online"
  },
  "Promotions": {
    "Status": "Finished",
    "PromoCode": "CV0DKA0D",
    "OnboardingInvitation": {
      "EmailAddress": "ana@v.com",
      "PhoneNumber": "2077742915"
    }
  },
  "AccountInformation": {
    "AccountType": "CHK_I_PERS_PREMIER",
    "DepositAccount": {
      "WithholdingIndicator": "ExemptConfirmed",
      "UserCode": "D",
      "StatusCodes": [
        "NeverClose"
      ],
      "BulkFileType": "ImageFile"
    },
    "CardAccount": {
      "NameOnCard": "RIMAS  BROWN",
      "CardDesign": "Black"
    },
    "CustomerToAccountRelationship": {
      "Customer1AccountRelationshipCode": "000",
      "Customer1AccountAssociationType": "Primary",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474",
        "IsForeignAddress": false
      },
      "NumberOfStatementCopies": 1,
      "AddressLineOfTINOwner": 1
    }
  },
  "CustomerInformation": {
    "DateOfBirth": "1987-01-01",
    "FirstName": "RIMAS",
    "LastName": "BROWN",
    "Gender": null,
    "PrimaryLanguage": "English",
    "VisaType": null,
    "ForeignTaxID": null,
    "PrimaryPurposeofAccOpening": null,
    "SourceofFunds": {
      "Source": null,
      "MiscDemographic": 2,
      "CustomerIntentforIntWireTransfer": {
        "TransferServices": false,
        "ForeignOutActivity": {
          "OutgoingWiresAmount": null,
          "OutgoingWires": null,
          "ForeignOutgoingActivity": false
        },
        "ForeignInActivity": {
          "IncomingWiresAmount": null,
          "IncomingWires": null,
          "ForeignIncomingActivity": false
        }
      }
    },
    "CISNumber": "",
    "PEP": "No",
    "Address": {
      "StreetAddress1": "456 Massachusetts Ave",
      "CountryCode": "USA",
      "IsForeignAddress": false,
      "City": "Arlington",
      "State": "MA",
      "Zip": "02474"
    },
    "CountryCode": "+1",
    "MobilePhoneNumber": "2077742915",
    "TaxNumber": "454545454",
    "TaxIdType": "SocialSecurityNumber",
    "CitizenshipCode": "USA",
    "BranchNumber": "8161",
    "CostCenterNumber": "161",
    "CategoryCode1": "903",
    "Occupation": "AgricultureOrFishing",
    "Identification": {
      "Status": "NonDocVerification",
      "NonDocumentaryIdentificationInformation1": "VLN"
    },
    "EmailAddress": "ana@v.com",
    "RequestUUID": "a040x000002LtbaAAC"
  },
  "Documents": []
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="47377352-74d6-42b8-8c3f-9b40c375053a">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			<flow-ref doc:name="Flow-ref to post:\process\submit\presubmission:velo-process-api-config" doc:id="d8c50237-dc6f-4282-b9b2-5ed3a8915b0f" name="post:\process\submit\presubmission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="d1d4fe6f-2ccc-4fc0-8087-cdd4fac3f407" message="Payload after test suite run #[payload]"/>
			<munit-tools:assert-that doc:name="Assert that" doc:id="c67ced8c-2de1-4214-a6a0-7c18354588e8" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Approved")]' message="Terafina SSN straight flow for ID verification failed"/>
			<munit-tools:assert-that doc:name="Assert that okta Id is present" doc:id="2e3bbb30-9b6e-49fe-8cf1-8e075a0e84f0" expression="#[payload.data.OktaId]" is='#[MunitTools::notNullValue()]' message="Partner okta id test case failed for success scenario" />
		</munit:validation>
	</munit:test>
	<munit:test name="IDVReturningKBAQuestions" description="MUnit Test" doc:id="125d3760-1749-41e0-b458-92443d7c75d4" >
		<munit:behavior>
			<flow-ref doc:name="PinpointSuccessMockSub_Flow" doc:id="15bcc8ef-9e4b-428b-879f-98ddea0fe67d" name="PinpointSuccessMockSub_Flow"/>
			<flow-ref doc:name="InstantIdVerificationReturnsKBAForPASSWorkFlow" doc:id="9d48e9a4-32d8-442c-8489-94f09ea5277a" name="InstantIdVerificationReturnsKBAForPASSWorkFlow"/>
		</munit:behavior>
		<munit:execution >
			<ee:transform doc:name="SetPayload" doc:id="a0fcc475-45ed-4740-892e-1f19effd1356" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "PinPointRequest": [
    {
      "handler": "session_info",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "result": "pass",
      "channel": "online",
      "new_account_data": {
        "new_account": true,
        "first_name": "RIMAS",
        "last_name": "BROWN",
        "phone_number": "12077742915",
        "email": "ana@v.com"
      }
    },
    {
      "handler": "pinpoint_eval",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "activity": "new_account",
      "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
      "timestamp": "2019-01-29 07:21:24"
    }
  ],
  "IdVerificationRequest": {
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "Venue": "online"
    },
    "Person": {
      "Name": {
        "FirstName": "RIMAS",
        "LastName": "BROWN"
      },
      "Addresses": [
        {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip5": "02474-5106",
          "Country": "US",
          "Context": "primary"
        }
      ],
      "SSN": {
        "Number": "454545454",
        "Type": "ssn9"
      },
      "DateOfBirth": {
        "Year": "1987",
        "Month": "1",
        "Day": "1"
      },
      "Phones": [
        {
          "Number": "2077742915",
          "Context": "mobile"
        }
      ]
    }
  },
  "IdAuthenticationResponse": [
  	{
        "Status": {
            "ConversationId": "31000157708855",
            "RequestId": "375476745",
            "TransactionStatus": "passed",
            "Reference": "payload.RequestUUID"
        },
        "Products": [
            {
                "ProductType": "TrueID",
                "ExecutedStepName": "True_ID_Step",
                "ProductConfigurationName": "TrueID_Flow",
                "ProductStatus": "pass"
            }
        ],
        "PassThroughs": [
            {
                "Type": "true.id",
                "Data": "{\"IDAuthResultResponse\":{\"Header\":{\"TransactionId\":\"2075551R49355\"},\"Success\":true,\"AuthenticationResult\":{\"DocumentName\":\"Connecticut (CT) Driver License\",\"DocAuthResult\":\"Passed\",\"DocIssuerCode\":\"CT\",\"DocIssuerName\":\"Connecticut\",\"DocClassCode\":\"DriversLicense\",\"DocClass\":\"DriversLicense\",\"DocClassName\":\"Drivers License\",\"DocIsGeneric\":\"false\",\"DocIssue\":\"2009\",\"DocIssueType\":\"Driver License\",\"DocSize\":\"ID1\",\"ClassificationMode\":\"Automatic\",\"OrientationChanged\":\"false\",\"PresentationChanged\":\"false\",\"FullName\":\"EVAN M MOZINGO\",\"Sex\":\"Male\",\"Age\":\"29\",\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11},\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11},\"Portrait\":\"\",\"Signature\":\"\",\"Alerts\":{\"IDAuthAlertData\":[{\"AlertID\":\"d9fdd5ce-059b-4719-90ff-c0167a57a173\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Stylized DOB Label\"]}},{\"AlertID\":\"73bcad3a-3ed7-4128-bb2d-856e82dbbe67\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Expires Label\"]}},{\"AlertID\":\"a5d5c1e3-fe2a-4d4e-87cb-5fd5fcb3db3f\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Inches\"]}},{\"AlertID\":\"214b827f-2fc2-44de-8331-f62b9509eb14\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Center\"]}},{\"AlertID\":\"81b25073-dc95-4314-bd2e-4f9b6deb04ac\",\"AlertName\":\"1D Control Number Valid\",\"AlertKey\":\"1D Control Number Valid\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checks whether the 1D barcode is indicative of known-fake documents.\"},{\"AlertID\":\"ee0dd230-73f9-45dd-acf6-1975d5eded2a\",\"AlertName\":\"2D Barcode Content\",\"AlertKey\":\"2D Barcode Content\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checked the contents of the two-dimensional barcode on the document.\"},{\"AlertID\":\"51b6ce5a-4be7-4031-88ad-b862c6e5e5bf\",\"AlertName\":\"Control Number Crosscheck\",\"AlertKey\":\"Control Number Crosscheck\",\"AuthenticationResult\":\"Caution\",\"AlertDescription\":\"Compare the machine-readable control number field to the human-readable document number field.\"},{\"AlertID\":\"1038cd34-2345-4020-aa6d-eefe54fa9ac9\",\"AlertName\":\"Document Expired\",\"AlertKey\":\"Document Expired\",\"AuthenticationResult\":\"Attention\",\"AlertDescription\":\"Checked if the document is expired.\"},{\"AlertID\":\"bf5762de-6c2b-476d-9fdd-4951e6249b43\",\"AlertName\":\"2D Barcode Read\",\"AlertKey\":\"2D Barcode Read\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the two-dimensional barcode on the document was read successfully.\"},{\"AlertID\":\"c715b400-6f2b-4d13-b71b-80812982f9de\",\"AlertName\":\"Birth Date Crosscheck\",\"AlertKey\":\"Birth Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable birth date field to the human-readable birth date field.\"},{\"AlertID\":\"85b79418-e002-43af-bfd0-df4dc60bb70c\",\"AlertName\":\"Birth Date Valid\",\"AlertKey\":\"Birth Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the birth date is valid.\"},{\"AlertID\":\"7e903bea-d6d0-4f6f-9a7c-fee41247247c\",\"AlertName\":\"Document Classification\",\"AlertKey\":\"Document Classification\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the type of document is supported and is able to be fully authenticated.\"},{\"AlertID\":\"afcb0232-8679-48ba-8ca3-ab3776f5e180\",\"AlertName\":\"Document Crosscheck Aggregation\",\"AlertKey\":\"Document Crosscheck Aggregation\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compared the machine-readable fields to the human-readable fields.\"},{\"AlertID\":\"aa30b127-5e63-4218-888b-98c3cdbcfc30\",\"AlertName\":\"Document Number Crosscheck\",\"AlertKey\":\"Document Number Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable document number field to the human-readable document number field.\"},{\"AlertID\":\"28ea814c-f898-4862-ab91-562a88a58bcf\",\"AlertName\":\"Expiration Date Crosscheck\",\"AlertKey\":\"Expiration Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable expiration date field to the human-readable expiration date field.\"},{\"AlertID\":\"c3936306-944b-4172-b4a5-4f74debfbf03\",\"AlertName\":\"Expiration Date Valid\",\"AlertKey\":\"Expiration Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the expiration date is valid.\"},{\"AlertID\":\"148f773d-b398-4c7d-a6ff-62a58ceedce8\",\"AlertName\":\"Full Name Crosscheck\",\"AlertKey\":\"Full Name Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable full name field to the human-readable full name field.\"},{\"AlertID\":\"e89b80ea-c1c5-4a8e-b4a5-2b86a51428ca\",\"AlertName\":\"Issue Date Valid\",\"AlertKey\":\"Issue Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the issue date is valid.\"},{\"AlertID\":\"f7e4c942-53e6-4ebb-9fe4-8fa54ff26bd1\",\"AlertName\":\"Layout Valid\",\"AlertKey\":\"Layout Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the layout of the document is correct.\",\"Regions\":{\"Region\":[\"2D Barcode Bottom Left\",\"2D Barcode Top Left\"]}},{\"AlertID\":\"1946201e-0a7f-4a9b-9aea-7ae232968038\",\"AlertName\":\"Sex Crosscheck\",\"AlertKey\":\"Sex Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable sex field to the human-readable sex field.\"},{\"AlertID\":\"0e6ec454-0b38-478e-b31d-1d134aea900b\",\"AlertName\":\"Visible Color Response\",\"AlertKey\":\"Visible Color Response\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the color response of an element on the visible image.\",\"Regions\":{\"Region\":[\"Background Salmon\"]}},{\"AlertID\":\"42a3abaf-d6f5-4915-bbb9-b00a846f6d85\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Boat\"]}}]},\"Fields\":{\"IDAuthFieldData\":[{\"Address\":\"1 MUDRY FARM RD\u2028BRISTOL, CT 02809-2366\"},{\"City\":\"BRISTOL\"},{\"AddressLine1\":\"1 MUDRY FARM RD\"},{\"PostalCode\":\"02809-2366\"},{\"State\":\"CT\"},{\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11}},{\"ControlNumber\":\"demo a11230009\"},{\"DocumentClassName\":\"Drivers License\"},{\"DocumentNumber\":\"096760377\"},{\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11}},{\"FirstName\":\"EVAN\"},{\"FullName\":\"EVAN M MOZINGO\"},{\"GivenName\":\"EVAN M\"},{\"Height\":\"5' 9\\\"\"},{\"IssueDate\":{\"Year\":2010,\"Month\":10,\"Day\":12}},{\"IssuingStateCode\":\"CT\"},{\"IssuingStateName\":\"Connecticut\"},{\"LicenseClass\":\"D\"},{\"MiddleName\":\"M\"},{\"Sex\":\"M\"},{\"Surname\":\"MOZINGO\"}]}}}}"
            }
        ]
    }
  ],
  "RequestUUID": "a040x000002LtbaAAC",
  "CaseId": "",
  "CaseStatus": "",
  "ApplicationId": "APP-M-10332",
  "ApplicantType": "NONNRA",
  "Settings": {
    "AccountNumber": "45065",
    "Workflow": "public.testing.redherrings.open",
    "Mode": "testing",
    "Reference": "Reference1",
    "Locale": "en_US",
    "ConversationId": "31000095253376",
    "Venue": "online"
  },
  "Promotions": {
    "Status": "Finished",
    "PromoCode": "CV0DKA0D",
    "OnboardingInvitation": {
      "EmailAddress": "ana@v.com",
      "PhoneNumber": "2077742915"
    }
  },
  "AccountInformation": {
    "AccountType": "CHK_I_PERS_PREMIER",
    "DepositAccount": {
      "WithholdingIndicator": "ExemptConfirmed",
      "UserCode": "D",
      "StatusCodes": [
        "NeverClose"
      ],
      "BulkFileType": "ImageFile"
    },
    "CardAccount": {
      "NameOnCard": "RIMAS  BROWN",
      "CardDesign": "Black"
    },
    "CustomerToAccountRelationship": {
      "Customer1AccountRelationshipCode": "000",
      "Customer1AccountAssociationType": "Primary",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474",
        "IsForeignAddress": false
      },
      "NumberOfStatementCopies": 1,
      "AddressLineOfTINOwner": 1
    }
  },
  "CustomerInformation": {
    "DateOfBirth": "1987-01-01",
    "FirstName": "RIMAS",
    "LastName": "BROWN",
    "Gender": null,
    "PrimaryLanguage": "English",
    "VisaType": null,
    "ForeignTaxID": null,
    "PrimaryPurposeofAccOpening": null,
    "SourceofFunds": {
      "Source": null,
      "MiscDemographic": 2,
      "CustomerIntentforIntWireTransfer": {
        "TransferServices": false,
        "ForeignOutActivity": {
          "OutgoingWiresAmount": null,
          "OutgoingWires": null,
          "ForeignOutgoingActivity": false
        },
        "ForeignInActivity": {
          "IncomingWiresAmount": null,
          "IncomingWires": null,
          "ForeignIncomingActivity": false
        }
      }
    },
    "CISNumber": "",
    "PEP": "No",
    "Address": {
      "StreetAddress1": "456 Massachusetts Ave",
      "CountryCode": "USA",
      "IsForeignAddress": false,
      "City": "Arlington",
      "State": "MA",
      "Zip": "02474"
    },
    "CountryCode": "+1",
    "MobilePhoneNumber": "2077742915",
    "TaxNumber": "454545454",
    "TaxIdType": "SocialSecurityNumber",
    "CitizenshipCode": "USA",
    "BranchNumber": "8161",
    "CostCenterNumber": "161",
    "CategoryCode1": "903",
    "Occupation": "AgricultureOrFishing",
    "Identification": {
      "Status": "NonDocVerification",
      "NonDocumentaryIdentificationInformation1": "VLN"
    },
    "EmailAddress": "ana@v.com",
    "RequestUUID": "a040x000002LtbaAAC"
  },
  "Documents": []
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="20b5904d-4093-4966-838f-15a47bcd3773">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			<flow-ref doc:name="Flow-ref to post:\process\submit\presubmission:velo-process-api-config" doc:id="ca811a5b-b665-4915-8fa8-332495063d61" name="post:\process\submit\presubmission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="a1d54c1a-f7d6-4c3d-b24f-5ef6e5c1ca5f" message="Payload after test suite run #[payload]"/>
			<munit-tools:assert-that doc:name="Assert that" doc:id="2c5f6c84-2391-4190-a953-7a666f4b88a9" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Pending")]' message="Terafina SSN KBA Questions return flow failed"/>
		</munit:validation>
	</munit:test>
	<munit:test name="WhenIDVReturnsTrasactionStatusAsFailed" description="MUnit Test" doc:id="18a72cdc-c303-4471-803c-c88d84eb4a85" ignore="true">
	<munit:behavior>
			<flow-ref doc:name="PinpointSuccessMockSub_Flow" doc:id="bfd03ac5-3d0a-468e-b158-0e8d30bc7666" name="PinpointSuccessMockSub_Flow"/>
			<flow-ref doc:name="InstantIdTrasactionStatusAsFailedForPassWorkFlow" doc:id="76392b75-4ba7-486c-b2a3-40a345ef48ae" name="InstantIdTrasactionStatusAsFailedForPassWorkFlow"/>
			<flow-ref doc:name="OFAC-Mock" doc:id="e09d1c8d-4eb2-4f91-9c60-179eb269669d" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="de0bf145-02a3-40cb-9f56-e18a613df822" name="PepMock"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="3494b2aa-34d0-4326-a144-6440eb15911a" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		<munit:execution >
			<ee:transform doc:name="SetPayload" doc:id="cdf5c1e8-3e47-42da-85f9-3b351b663599" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "PinPointRequest": [
    {
      "handler": "session_info",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "result": "pass",
      "channel": "online",
      "new_account_data": {
        "new_account": true,
        "first_name": "RIMAS",
        "last_name": "BROWN",
        "phone_number": "12077742915",
        "email": "ana@v.com"
      }
    },
    {
      "handler": "pinpoint_eval",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "activity": "new_account",
      "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
      "timestamp": "2019-01-29 07:21:24"
    }
  ],
  "IdVerificationRequest": {
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "Venue": "online"
    },
    "Person": {
      "Name": {
        "FirstName": "RIMAS",
        "LastName": "BROWN"
      },
      "Addresses": [
        {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip5": "02474-5106",
          "Country": "US",
          "Context": "primary"
        }
      ],
      "SSN": {
        "Number": "454545454",
        "Type": "ssn9"
      },
      "DateOfBirth": {
        "Year": "1987",
        "Month": "1",
        "Day": "1"
      },
      "Phones": [
        {
          "Number": "2077742915",
          "Context": "mobile"
        }
      ]
    }
  },
  "IdAuthenticationResponse": [
  	{
        "Status": {
            "ConversationId": "31000157708855",
            "RequestId": "375476745",
            "TransactionStatus": "passed",
            "Reference": "payload.RequestUUID"
        },
        "Products": [
            {
                "ProductType": "TrueID",
                "ExecutedStepName": "True_ID_Step",
                "ProductConfigurationName": "TrueID_Flow",
                "ProductStatus": "pass"
            }
        ],
        "PassThroughs": [
            {
                "Type": "true.id",
                "Data": "{\"IDAuthResultResponse\":{\"Header\":{\"TransactionId\":\"2075551R49355\"},\"Success\":true,\"AuthenticationResult\":{\"DocumentName\":\"Connecticut (CT) Driver License\",\"DocAuthResult\":\"Passed\",\"DocIssuerCode\":\"CT\",\"DocIssuerName\":\"Connecticut\",\"DocClassCode\":\"DriversLicense\",\"DocClass\":\"DriversLicense\",\"DocClassName\":\"Drivers License\",\"DocIsGeneric\":\"false\",\"DocIssue\":\"2009\",\"DocIssueType\":\"Driver License\",\"DocSize\":\"ID1\",\"ClassificationMode\":\"Automatic\",\"OrientationChanged\":\"false\",\"PresentationChanged\":\"false\",\"FullName\":\"EVAN M MOZINGO\",\"Sex\":\"Male\",\"Age\":\"29\",\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11},\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11},\"Portrait\":\"\",\"Signature\":\"\",\"Alerts\":{\"IDAuthAlertData\":[{\"AlertID\":\"d9fdd5ce-059b-4719-90ff-c0167a57a173\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Stylized DOB Label\"]}},{\"AlertID\":\"73bcad3a-3ed7-4128-bb2d-856e82dbbe67\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Expires Label\"]}},{\"AlertID\":\"a5d5c1e3-fe2a-4d4e-87cb-5fd5fcb3db3f\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Inches\"]}},{\"AlertID\":\"214b827f-2fc2-44de-8331-f62b9509eb14\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Center\"]}},{\"AlertID\":\"81b25073-dc95-4314-bd2e-4f9b6deb04ac\",\"AlertName\":\"1D Control Number Valid\",\"AlertKey\":\"1D Control Number Valid\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checks whether the 1D barcode is indicative of known-fake documents.\"},{\"AlertID\":\"ee0dd230-73f9-45dd-acf6-1975d5eded2a\",\"AlertName\":\"2D Barcode Content\",\"AlertKey\":\"2D Barcode Content\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checked the contents of the two-dimensional barcode on the document.\"},{\"AlertID\":\"51b6ce5a-4be7-4031-88ad-b862c6e5e5bf\",\"AlertName\":\"Control Number Crosscheck\",\"AlertKey\":\"Control Number Crosscheck\",\"AuthenticationResult\":\"Caution\",\"AlertDescription\":\"Compare the machine-readable control number field to the human-readable document number field.\"},{\"AlertID\":\"1038cd34-2345-4020-aa6d-eefe54fa9ac9\",\"AlertName\":\"Document Expired\",\"AlertKey\":\"Document Expired\",\"AuthenticationResult\":\"Attention\",\"AlertDescription\":\"Checked if the document is expired.\"},{\"AlertID\":\"bf5762de-6c2b-476d-9fdd-4951e6249b43\",\"AlertName\":\"2D Barcode Read\",\"AlertKey\":\"2D Barcode Read\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the two-dimensional barcode on the document was read successfully.\"},{\"AlertID\":\"c715b400-6f2b-4d13-b71b-80812982f9de\",\"AlertName\":\"Birth Date Crosscheck\",\"AlertKey\":\"Birth Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable birth date field to the human-readable birth date field.\"},{\"AlertID\":\"85b79418-e002-43af-bfd0-df4dc60bb70c\",\"AlertName\":\"Birth Date Valid\",\"AlertKey\":\"Birth Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the birth date is valid.\"},{\"AlertID\":\"7e903bea-d6d0-4f6f-9a7c-fee41247247c\",\"AlertName\":\"Document Classification\",\"AlertKey\":\"Document Classification\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the type of document is supported and is able to be fully authenticated.\"},{\"AlertID\":\"afcb0232-8679-48ba-8ca3-ab3776f5e180\",\"AlertName\":\"Document Crosscheck Aggregation\",\"AlertKey\":\"Document Crosscheck Aggregation\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compared the machine-readable fields to the human-readable fields.\"},{\"AlertID\":\"aa30b127-5e63-4218-888b-98c3cdbcfc30\",\"AlertName\":\"Document Number Crosscheck\",\"AlertKey\":\"Document Number Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable document number field to the human-readable document number field.\"},{\"AlertID\":\"28ea814c-f898-4862-ab91-562a88a58bcf\",\"AlertName\":\"Expiration Date Crosscheck\",\"AlertKey\":\"Expiration Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable expiration date field to the human-readable expiration date field.\"},{\"AlertID\":\"c3936306-944b-4172-b4a5-4f74debfbf03\",\"AlertName\":\"Expiration Date Valid\",\"AlertKey\":\"Expiration Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the expiration date is valid.\"},{\"AlertID\":\"148f773d-b398-4c7d-a6ff-62a58ceedce8\",\"AlertName\":\"Full Name Crosscheck\",\"AlertKey\":\"Full Name Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable full name field to the human-readable full name field.\"},{\"AlertID\":\"e89b80ea-c1c5-4a8e-b4a5-2b86a51428ca\",\"AlertName\":\"Issue Date Valid\",\"AlertKey\":\"Issue Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the issue date is valid.\"},{\"AlertID\":\"f7e4c942-53e6-4ebb-9fe4-8fa54ff26bd1\",\"AlertName\":\"Layout Valid\",\"AlertKey\":\"Layout Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the layout of the document is correct.\",\"Regions\":{\"Region\":[\"2D Barcode Bottom Left\",\"2D Barcode Top Left\"]}},{\"AlertID\":\"1946201e-0a7f-4a9b-9aea-7ae232968038\",\"AlertName\":\"Sex Crosscheck\",\"AlertKey\":\"Sex Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable sex field to the human-readable sex field.\"},{\"AlertID\":\"0e6ec454-0b38-478e-b31d-1d134aea900b\",\"AlertName\":\"Visible Color Response\",\"AlertKey\":\"Visible Color Response\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the color response of an element on the visible image.\",\"Regions\":{\"Region\":[\"Background Salmon\"]}},{\"AlertID\":\"42a3abaf-d6f5-4915-bbb9-b00a846f6d85\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Boat\"]}}]},\"Fields\":{\"IDAuthFieldData\":[{\"Address\":\"1 MUDRY FARM RD\u2028BRISTOL, CT 02809-2366\"},{\"City\":\"BRISTOL\"},{\"AddressLine1\":\"1 MUDRY FARM RD\"},{\"PostalCode\":\"02809-2366\"},{\"State\":\"CT\"},{\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11}},{\"ControlNumber\":\"demo a11230009\"},{\"DocumentClassName\":\"Drivers License\"},{\"DocumentNumber\":\"096760377\"},{\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11}},{\"FirstName\":\"EVAN\"},{\"FullName\":\"EVAN M MOZINGO\"},{\"GivenName\":\"EVAN M\"},{\"Height\":\"5' 9\\\"\"},{\"IssueDate\":{\"Year\":2010,\"Month\":10,\"Day\":12}},{\"IssuingStateCode\":\"CT\"},{\"IssuingStateName\":\"Connecticut\"},{\"LicenseClass\":\"D\"},{\"MiddleName\":\"M\"},{\"Sex\":\"M\"},{\"Surname\":\"MOZINGO\"}]}}}}"
            }
        ]
    }
  ],
  "RequestUUID": "a040x000002LtbaAAC",
  "CaseId": "",
  "CaseStatus": "",
  "ApplicationId": "APP-M-10332",
  "ApplicantType": "NONNRA",
  "Settings": {
    "AccountNumber": "45065",
    "Workflow": "public.testing.redherrings.open",
    "Mode": "testing",
    "Reference": "Reference1",
    "Locale": "en_US",
    "ConversationId": "31000095253376",
    "Venue": "online"
  },
  "Promotions": {
    "Status": "Finished",
    "PromoCode": "CV0DKA0D",
    "OnboardingInvitation": {
      "EmailAddress": "ana@v.com",
      "PhoneNumber": "2077742915"
    }
  },
  "AccountInformation": {
    "AccountType": "CHK_I_PERS_PREMIER",
    "DepositAccount": {
      "WithholdingIndicator": "ExemptConfirmed",
      "UserCode": "D",
      "StatusCodes": [
        "NeverClose"
      ],
      "BulkFileType": "ImageFile"
    },
    "CardAccount": {
      "NameOnCard": "RIMAS  BROWN",
      "CardDesign": "Black"
    },
    "CustomerToAccountRelationship": {
      "Customer1AccountRelationshipCode": "000",
      "Customer1AccountAssociationType": "Primary",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474",
        "IsForeignAddress": false
      },
      "NumberOfStatementCopies": 1,
      "AddressLineOfTINOwner": 1
    }
  },
  "CustomerInformation": {
    "DateOfBirth": "1987-01-01",
    "FirstName": "RIMAS",
    "LastName": "BROWN",
    "Gender": null,
    "PrimaryLanguage": "English",
    "VisaType": null,
    "ForeignTaxID": null,
    "PrimaryPurposeofAccOpening": null,
    "SourceofFunds": {
      "Source": null,
      "MiscDemographic": 2,
      "CustomerIntentforIntWireTransfer": {
        "TransferServices": false,
        "ForeignOutActivity": {
          "OutgoingWiresAmount": null,
          "OutgoingWires": null,
          "ForeignOutgoingActivity": false
        },
        "ForeignInActivity": {
          "IncomingWiresAmount": null,
          "IncomingWires": null,
          "ForeignIncomingActivity": false
        }
      }
    },
    "CISNumber": "",
    "PEP": "No",
    "Address": {
      "StreetAddress1": "456 Massachusetts Ave",
      "CountryCode": "USA",
      "IsForeignAddress": false,
      "City": "Arlington",
      "State": "MA",
      "Zip": "02474"
    },
    "CountryCode": "+1",
    "MobilePhoneNumber": "2077742915",
    "TaxNumber": "454545454",
    "TaxIdType": "SocialSecurityNumber",
    "CitizenshipCode": "USA",
    "BranchNumber": "8161",
    "CostCenterNumber": "161",
    "CategoryCode1": "903",
    "Occupation": "AgricultureOrFishing",
    "Identification": {
      "Status": "NonDocVerification",
      "NonDocumentaryIdentificationInformation1": "VLN"
    },
    "EmailAddress": "ana@v.com",
    "RequestUUID": "a040x000002LtbaAAC"
  },
  "Documents": []
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="037802c7-56a9-45fa-b9a8-fbafeb9be967">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			<flow-ref doc:name="Flow-ref to post:\process\submit\presubmission:velo-process-api-config" doc:id="884e7252-81a2-45db-8390-141169a5da1c" name="post:\process\submit\presubmission:velo-process-api-config"/>
		</munit:execution>
		
	<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="cfe02f6b-9e95-4c80-8aea-64f61dd70d3a" message="Payload after test suite run #[payload]"/>
			<munit-tools:assert-that doc:name="Assert that" doc:id="cbab48e2-0710-47b8-bf81-eb882f44897e" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Declined")]' message="Terafina SSN Test case failed for IDV Returning Trasaction Status as Failed"/>
		</munit:validation>
	</munit:test>
	<munit:test name="WhenIDVReturnsTrasactionStatusAsError" description="MUnit Test" doc:id="3d347f61-394b-4baa-94a2-8628fac57d12" >
	<munit:behavior>
			<flow-ref doc:name="PinpointSuccessMockSub_Flow" doc:id="804610d5-ceec-4f8c-bf7a-547efa6e0671" name="PinpointSuccessMockSub_Flow"/>
			<flow-ref doc:name="InstantIdTrasactionStatusAsErrorForPassWorkFlow" doc:id="1f359f26-506b-43a5-813d-f77976f4d2d0" name="InstantIdTrasactionStatusAsErrorForPassWorkFlow"/>
			<flow-ref doc:name="OFAC-Mock" doc:id="4b2d7afb-91af-4c51-a5a9-6aa336ba48c7" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="2dac4fe4-f89a-4c51-ab88-f648c4a68db7" name="PepMock"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="042a95b8-30f3-42db-8938-1793232a6306" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		<munit:execution >
			<ee:transform doc:name="SetPayload" doc:id="672f1957-ed54-459e-91e1-7f62ce61b75a" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "PinPointRequest": [
    {
      "handler": "session_info",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "result": "pass",
      "channel": "online",
      "new_account_data": {
        "new_account": true,
        "first_name": "RIMAS",
        "last_name": "BROWN",
        "phone_number": "12077742915",
        "email": "ana@v.com"
      }
    },
    {
      "handler": "pinpoint_eval",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "activity": "new_account",
      "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
      "timestamp": "2019-01-29 07:21:24"
    }
  ],
  "IdVerificationRequest": {
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "Venue": "online"
    },
    "Person": {
      "Name": {
        "FirstName": "RIMAS",
        "LastName": "BROWN"
      },
      "Addresses": [
        {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip5": "02474-5106",
          "Country": "US",
          "Context": "primary"
        }
      ],
      "SSN": {
        "Number": "454545454",
        "Type": "ssn9"
      },
      "DateOfBirth": {
        "Year": "1987",
        "Month": "1",
        "Day": "1"
      },
      "Phones": [
        {
          "Number": "2077742915",
          "Context": "mobile"
        }
      ]
    }
  },
  "IdAuthenticationResponse": [
  	{
        "Status": {
            "ConversationId": "31000157708855",
            "RequestId": "375476745",
            "TransactionStatus": "passed",
            "Reference": "payload.RequestUUID"
        },
        "Products": [
            {
                "ProductType": "TrueID",
                "ExecutedStepName": "True_ID_Step",
                "ProductConfigurationName": "TrueID_Flow",
                "ProductStatus": "pass"
            }
        ],
        "PassThroughs": [
            {
                "Type": "true.id",
                "Data": "{\"IDAuthResultResponse\":{\"Header\":{\"TransactionId\":\"2075551R49355\"},\"Success\":true,\"AuthenticationResult\":{\"DocumentName\":\"Connecticut (CT) Driver License\",\"DocAuthResult\":\"Passed\",\"DocIssuerCode\":\"CT\",\"DocIssuerName\":\"Connecticut\",\"DocClassCode\":\"DriversLicense\",\"DocClass\":\"DriversLicense\",\"DocClassName\":\"Drivers License\",\"DocIsGeneric\":\"false\",\"DocIssue\":\"2009\",\"DocIssueType\":\"Driver License\",\"DocSize\":\"ID1\",\"ClassificationMode\":\"Automatic\",\"OrientationChanged\":\"false\",\"PresentationChanged\":\"false\",\"FullName\":\"EVAN M MOZINGO\",\"Sex\":\"Male\",\"Age\":\"29\",\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11},\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11},\"Portrait\":\"\",\"Signature\":\"\",\"Alerts\":{\"IDAuthAlertData\":[{\"AlertID\":\"d9fdd5ce-059b-4719-90ff-c0167a57a173\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Stylized DOB Label\"]}},{\"AlertID\":\"73bcad3a-3ed7-4128-bb2d-856e82dbbe67\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Expires Label\"]}},{\"AlertID\":\"a5d5c1e3-fe2a-4d4e-87cb-5fd5fcb3db3f\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Inches\"]}},{\"AlertID\":\"214b827f-2fc2-44de-8331-f62b9509eb14\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Center\"]}},{\"AlertID\":\"81b25073-dc95-4314-bd2e-4f9b6deb04ac\",\"AlertName\":\"1D Control Number Valid\",\"AlertKey\":\"1D Control Number Valid\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checks whether the 1D barcode is indicative of known-fake documents.\"},{\"AlertID\":\"ee0dd230-73f9-45dd-acf6-1975d5eded2a\",\"AlertName\":\"2D Barcode Content\",\"AlertKey\":\"2D Barcode Content\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checked the contents of the two-dimensional barcode on the document.\"},{\"AlertID\":\"51b6ce5a-4be7-4031-88ad-b862c6e5e5bf\",\"AlertName\":\"Control Number Crosscheck\",\"AlertKey\":\"Control Number Crosscheck\",\"AuthenticationResult\":\"Caution\",\"AlertDescription\":\"Compare the machine-readable control number field to the human-readable document number field.\"},{\"AlertID\":\"1038cd34-2345-4020-aa6d-eefe54fa9ac9\",\"AlertName\":\"Document Expired\",\"AlertKey\":\"Document Expired\",\"AuthenticationResult\":\"Attention\",\"AlertDescription\":\"Checked if the document is expired.\"},{\"AlertID\":\"bf5762de-6c2b-476d-9fdd-4951e6249b43\",\"AlertName\":\"2D Barcode Read\",\"AlertKey\":\"2D Barcode Read\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the two-dimensional barcode on the document was read successfully.\"},{\"AlertID\":\"c715b400-6f2b-4d13-b71b-80812982f9de\",\"AlertName\":\"Birth Date Crosscheck\",\"AlertKey\":\"Birth Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable birth date field to the human-readable birth date field.\"},{\"AlertID\":\"85b79418-e002-43af-bfd0-df4dc60bb70c\",\"AlertName\":\"Birth Date Valid\",\"AlertKey\":\"Birth Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the birth date is valid.\"},{\"AlertID\":\"7e903bea-d6d0-4f6f-9a7c-fee41247247c\",\"AlertName\":\"Document Classification\",\"AlertKey\":\"Document Classification\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the type of document is supported and is able to be fully authenticated.\"},{\"AlertID\":\"afcb0232-8679-48ba-8ca3-ab3776f5e180\",\"AlertName\":\"Document Crosscheck Aggregation\",\"AlertKey\":\"Document Crosscheck Aggregation\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compared the machine-readable fields to the human-readable fields.\"},{\"AlertID\":\"aa30b127-5e63-4218-888b-98c3cdbcfc30\",\"AlertName\":\"Document Number Crosscheck\",\"AlertKey\":\"Document Number Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable document number field to the human-readable document number field.\"},{\"AlertID\":\"28ea814c-f898-4862-ab91-562a88a58bcf\",\"AlertName\":\"Expiration Date Crosscheck\",\"AlertKey\":\"Expiration Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable expiration date field to the human-readable expiration date field.\"},{\"AlertID\":\"c3936306-944b-4172-b4a5-4f74debfbf03\",\"AlertName\":\"Expiration Date Valid\",\"AlertKey\":\"Expiration Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the expiration date is valid.\"},{\"AlertID\":\"148f773d-b398-4c7d-a6ff-62a58ceedce8\",\"AlertName\":\"Full Name Crosscheck\",\"AlertKey\":\"Full Name Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable full name field to the human-readable full name field.\"},{\"AlertID\":\"e89b80ea-c1c5-4a8e-b4a5-2b86a51428ca\",\"AlertName\":\"Issue Date Valid\",\"AlertKey\":\"Issue Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the issue date is valid.\"},{\"AlertID\":\"f7e4c942-53e6-4ebb-9fe4-8fa54ff26bd1\",\"AlertName\":\"Layout Valid\",\"AlertKey\":\"Layout Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the layout of the document is correct.\",\"Regions\":{\"Region\":[\"2D Barcode Bottom Left\",\"2D Barcode Top Left\"]}},{\"AlertID\":\"1946201e-0a7f-4a9b-9aea-7ae232968038\",\"AlertName\":\"Sex Crosscheck\",\"AlertKey\":\"Sex Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable sex field to the human-readable sex field.\"},{\"AlertID\":\"0e6ec454-0b38-478e-b31d-1d134aea900b\",\"AlertName\":\"Visible Color Response\",\"AlertKey\":\"Visible Color Response\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the color response of an element on the visible image.\",\"Regions\":{\"Region\":[\"Background Salmon\"]}},{\"AlertID\":\"42a3abaf-d6f5-4915-bbb9-b00a846f6d85\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Boat\"]}}]},\"Fields\":{\"IDAuthFieldData\":[{\"Address\":\"1 MUDRY FARM RD\u2028BRISTOL, CT 02809-2366\"},{\"City\":\"BRISTOL\"},{\"AddressLine1\":\"1 MUDRY FARM RD\"},{\"PostalCode\":\"02809-2366\"},{\"State\":\"CT\"},{\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11}},{\"ControlNumber\":\"demo a11230009\"},{\"DocumentClassName\":\"Drivers License\"},{\"DocumentNumber\":\"096760377\"},{\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11}},{\"FirstName\":\"EVAN\"},{\"FullName\":\"EVAN M MOZINGO\"},{\"GivenName\":\"EVAN M\"},{\"Height\":\"5' 9\\\"\"},{\"IssueDate\":{\"Year\":2010,\"Month\":10,\"Day\":12}},{\"IssuingStateCode\":\"CT\"},{\"IssuingStateName\":\"Connecticut\"},{\"LicenseClass\":\"D\"},{\"MiddleName\":\"M\"},{\"Sex\":\"M\"},{\"Surname\":\"MOZINGO\"}]}}}}"
            }
        ]
    }
  ],
  "RequestUUID": "a040x000002LtbaAAC",
  "CaseId": "",
  "CaseStatus": "",
  "ApplicationId": "APP-M-10332",
  "ApplicantType": "NONNRA",
  "Settings": {
    "AccountNumber": "45065",
    "Workflow": "public.testing.redherrings.open",
    "Mode": "testing",
    "Reference": "Reference1",
    "Locale": "en_US",
    "ConversationId": "31000095253376",
    "Venue": "online"
  },
  "Promotions": {
    "Status": "Finished",
    "PromoCode": "CV0DKA0D",
    "OnboardingInvitation": {
      "EmailAddress": "ana@v.com",
      "PhoneNumber": "2077742915"
    }
  },
  "AccountInformation": {
    "AccountType": "CHK_I_PERS_PREMIER",
    "DepositAccount": {
      "WithholdingIndicator": "ExemptConfirmed",
      "UserCode": "D",
      "StatusCodes": [
        "NeverClose"
      ],
      "BulkFileType": "ImageFile"
    },
    "CardAccount": {
      "NameOnCard": "RIMAS  BROWN",
      "CardDesign": "Black"
    },
    "CustomerToAccountRelationship": {
      "Customer1AccountRelationshipCode": "000",
      "Customer1AccountAssociationType": "Primary",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474",
        "IsForeignAddress": false
      },
      "NumberOfStatementCopies": 1,
      "AddressLineOfTINOwner": 1
    }
  },
  "CustomerInformation": {
    "DateOfBirth": "1987-01-01",
    "FirstName": "RIMAS",
    "LastName": "BROWN",
    "Gender": null,
    "PrimaryLanguage": "English",
    "VisaType": null,
    "ForeignTaxID": null,
    "PrimaryPurposeofAccOpening": null,
    "SourceofFunds": {
      "Source": null,
      "MiscDemographic": 2,
      "CustomerIntentforIntWireTransfer": {
        "TransferServices": false,
        "ForeignOutActivity": {
          "OutgoingWiresAmount": null,
          "OutgoingWires": null,
          "ForeignOutgoingActivity": false
        },
        "ForeignInActivity": {
          "IncomingWiresAmount": null,
          "IncomingWires": null,
          "ForeignIncomingActivity": false
        }
      }
    },
    "CISNumber": "",
    "PEP": "No",
    "Address": {
      "StreetAddress1": "456 Massachusetts Ave",
      "CountryCode": "USA",
      "IsForeignAddress": false,
      "City": "Arlington",
      "State": "MA",
      "Zip": "02474"
    },
    "CountryCode": "+1",
    "MobilePhoneNumber": "2077742915",
    "TaxNumber": "454545454",
    "TaxIdType": "SocialSecurityNumber",
    "CitizenshipCode": "USA",
    "BranchNumber": "8161",
    "CostCenterNumber": "161",
    "CategoryCode1": "903",
    "Occupation": "AgricultureOrFishing",
    "Identification": {
      "Status": "NonDocVerification",
      "NonDocumentaryIdentificationInformation1": "VLN"
    },
    "EmailAddress": "ana@v.com",
    "RequestUUID": "a040x000002LtbaAAC"
  },
  "Documents": []
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="49388828-da52-4e93-aba3-aff65bbfc11c">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			<flow-ref doc:name="Flow-ref to post:\process\submit\presubmission:velo-process-api-config" doc:id="41bfee50-4813-4fe3-a134-6a0c5d1b5a61" name="post:\process\submit\presubmission:velo-process-api-config"/>
		</munit:execution>
		
	<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="090c7ba9-8da9-4752-82d3-045e7a131600" message="Payload after test suite run #[payload]"/>
			<munit-tools:assert-that doc:name="Assert that" doc:id="96553fb7-f8db-43f7-9df9-8a581f2d5a8e" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Pending")]' message="Terafina SSN Test case failed for IDV Returning Trasaction Status as Error"/>
		</munit:validation>
	</munit:test>
	
	<munit:test name="WhenIdAuthenticationDocAuthResultIsFailed" description="MUnit Test" doc:id="7503cd17-0b48-4daa-9d2e-63c08dddd3fd" >
	<munit:behavior>
			<flow-ref doc:name="PinpointSuccessMockSub_Flow" doc:id="a23435ad-9a37-4f36-a960-b5e134d514d1" name="PinpointSuccessMockSub_Flow"/>
			<flow-ref doc:name="OFAC-Mock" doc:id="f629fd0d-9d41-494a-9a67-0a2759851edc" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="b4d1bd42-6aed-42dd-bad7-56c3fa047b16" name="PepMock"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="efd4fb47-61a3-4dae-be0c-e66f454ce5b1" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		<munit:execution >
			<ee:transform doc:name="SetPayload" doc:id="6f3c4e34-77e9-4780-9b67-16785de60d4c" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "PinPointRequest": [
    {
      "handler": "session_info",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "result": "pass",
      "channel": "online",
      "new_account_data": {
        "new_account": true,
        "first_name": "RIMAS",
        "last_name": "BROWN",
        "phone_number": "12077742915",
        "email": "ana@v.com"
      }
    },
    {
      "handler": "pinpoint_eval",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "activity": "new_account",
      "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
      "timestamp": "2019-01-29 07:21:24"
    }
  ],
  "IdVerificationRequest": {
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "Venue": "online"
    },
    "Person": {
      "Name": {
        "FirstName": "RIMAS",
        "LastName": "BROWN"
      },
      "Addresses": [
        {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip5": "02474-5106",
          "Country": "US",
          "Context": "primary"
        }
      ],
      "SSN": {
        "Number": "454545454",
        "Type": "ssn9"
      },
      "DateOfBirth": {
        "Year": "1987",
        "Month": "1",
        "Day": "1"
      },
      "Phones": [
        {
          "Number": "2077742915",
          "Context": "mobile"
        }
      ]
    }
  },
  "IdAuthenticationResponse": [
  	{
        "Status": {
            "ConversationId": "31000157708855",
            "RequestId": "375476745",
            "TransactionStatus": "passed",
            "Reference": "payload.RequestUUID"
        },
        "Products": [
            {
                "ProductType": "TrueID",
                "ExecutedStepName": "True_ID_Step",
                "ProductConfigurationName": "TrueID_Flow",
                "ProductStatus": "pass"
            }
        ],
        "PassThroughs": [
            {
                "Type": "true.id",
                "Data": "{\"IDAuthResultResponse\":{\"Header\":{\"TransactionId\":\"2075551R49355\"},\"Success\":true,\"AuthenticationResult\":{\"DocumentName\":\"Connecticut (CT) Driver License\",\"DocAuthResult\":\"Failed\",\"DocIssuerCode\":\"CT\",\"DocIssuerName\":\"Connecticut\",\"DocClassCode\":\"DriversLicense\",\"DocClass\":\"DriversLicense\",\"DocClassName\":\"Drivers License\",\"DocIsGeneric\":\"false\",\"DocIssue\":\"2009\",\"DocIssueType\":\"Driver License\",\"DocSize\":\"ID1\",\"ClassificationMode\":\"Automatic\",\"OrientationChanged\":\"false\",\"PresentationChanged\":\"false\",\"FullName\":\"EVAN M MOZINGO\",\"Sex\":\"Male\",\"Age\":\"29\",\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11},\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11},\"Portrait\":\"\",\"Signature\":\"\",\"Alerts\":{\"IDAuthAlertData\":[{\"AlertID\":\"d9fdd5ce-059b-4719-90ff-c0167a57a173\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Stylized DOB Label\"]}},{\"AlertID\":\"73bcad3a-3ed7-4128-bb2d-856e82dbbe67\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Expires Label\"]}},{\"AlertID\":\"a5d5c1e3-fe2a-4d4e-87cb-5fd5fcb3db3f\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Inches\"]}},{\"AlertID\":\"214b827f-2fc2-44de-8331-f62b9509eb14\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Center\"]}},{\"AlertID\":\"81b25073-dc95-4314-bd2e-4f9b6deb04ac\",\"AlertName\":\"1D Control Number Valid\",\"AlertKey\":\"1D Control Number Valid\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checks whether the 1D barcode is indicative of known-fake documents.\"},{\"AlertID\":\"ee0dd230-73f9-45dd-acf6-1975d5eded2a\",\"AlertName\":\"2D Barcode Content\",\"AlertKey\":\"2D Barcode Content\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checked the contents of the two-dimensional barcode on the document.\"},{\"AlertID\":\"51b6ce5a-4be7-4031-88ad-b862c6e5e5bf\",\"AlertName\":\"Control Number Crosscheck\",\"AlertKey\":\"Control Number Crosscheck\",\"AuthenticationResult\":\"Caution\",\"AlertDescription\":\"Compare the machine-readable control number field to the human-readable document number field.\"},{\"AlertID\":\"1038cd34-2345-4020-aa6d-eefe54fa9ac9\",\"AlertName\":\"Document Expired\",\"AlertKey\":\"Document Expired\",\"AuthenticationResult\":\"Attention\",\"AlertDescription\":\"Checked if the document is expired.\"},{\"AlertID\":\"bf5762de-6c2b-476d-9fdd-4951e6249b43\",\"AlertName\":\"2D Barcode Read\",\"AlertKey\":\"2D Barcode Read\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the two-dimensional barcode on the document was read successfully.\"},{\"AlertID\":\"c715b400-6f2b-4d13-b71b-80812982f9de\",\"AlertName\":\"Birth Date Crosscheck\",\"AlertKey\":\"Birth Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable birth date field to the human-readable birth date field.\"},{\"AlertID\":\"85b79418-e002-43af-bfd0-df4dc60bb70c\",\"AlertName\":\"Birth Date Valid\",\"AlertKey\":\"Birth Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the birth date is valid.\"},{\"AlertID\":\"7e903bea-d6d0-4f6f-9a7c-fee41247247c\",\"AlertName\":\"Document Classification\",\"AlertKey\":\"Document Classification\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the type of document is supported and is able to be fully authenticated.\"},{\"AlertID\":\"afcb0232-8679-48ba-8ca3-ab3776f5e180\",\"AlertName\":\"Document Crosscheck Aggregation\",\"AlertKey\":\"Document Crosscheck Aggregation\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compared the machine-readable fields to the human-readable fields.\"},{\"AlertID\":\"aa30b127-5e63-4218-888b-98c3cdbcfc30\",\"AlertName\":\"Document Number Crosscheck\",\"AlertKey\":\"Document Number Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable document number field to the human-readable document number field.\"},{\"AlertID\":\"28ea814c-f898-4862-ab91-562a88a58bcf\",\"AlertName\":\"Expiration Date Crosscheck\",\"AlertKey\":\"Expiration Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable expiration date field to the human-readable expiration date field.\"},{\"AlertID\":\"c3936306-944b-4172-b4a5-4f74debfbf03\",\"AlertName\":\"Expiration Date Valid\",\"AlertKey\":\"Expiration Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the expiration date is valid.\"},{\"AlertID\":\"148f773d-b398-4c7d-a6ff-62a58ceedce8\",\"AlertName\":\"Full Name Crosscheck\",\"AlertKey\":\"Full Name Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable full name field to the human-readable full name field.\"},{\"AlertID\":\"e89b80ea-c1c5-4a8e-b4a5-2b86a51428ca\",\"AlertName\":\"Issue Date Valid\",\"AlertKey\":\"Issue Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the issue date is valid.\"},{\"AlertID\":\"f7e4c942-53e6-4ebb-9fe4-8fa54ff26bd1\",\"AlertName\":\"Layout Valid\",\"AlertKey\":\"Layout Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the layout of the document is correct.\",\"Regions\":{\"Region\":[\"2D Barcode Bottom Left\",\"2D Barcode Top Left\"]}},{\"AlertID\":\"1946201e-0a7f-4a9b-9aea-7ae232968038\",\"AlertName\":\"Sex Crosscheck\",\"AlertKey\":\"Sex Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable sex field to the human-readable sex field.\"},{\"AlertID\":\"0e6ec454-0b38-478e-b31d-1d134aea900b\",\"AlertName\":\"Visible Color Response\",\"AlertKey\":\"Visible Color Response\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the color response of an element on the visible image.\",\"Regions\":{\"Region\":[\"Background Salmon\"]}},{\"AlertID\":\"42a3abaf-d6f5-4915-bbb9-b00a846f6d85\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Boat\"]}}]},\"Fields\":{\"IDAuthFieldData\":[{\"Address\":\"1 MUDRY FARM RD\u2028BRISTOL, CT 02809-2366\"},{\"City\":\"BRISTOL\"},{\"AddressLine1\":\"1 MUDRY FARM RD\"},{\"PostalCode\":\"02809-2366\"},{\"State\":\"CT\"},{\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11}},{\"ControlNumber\":\"demo a11230009\"},{\"DocumentClassName\":\"Drivers License\"},{\"DocumentNumber\":\"096760377\"},{\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11}},{\"FirstName\":\"EVAN\"},{\"FullName\":\"EVAN M MOZINGO\"},{\"GivenName\":\"EVAN M\"},{\"Height\":\"5' 9\\\"\"},{\"IssueDate\":{\"Year\":2010,\"Month\":10,\"Day\":12}},{\"IssuingStateCode\":\"CT\"},{\"IssuingStateName\":\"Connecticut\"},{\"LicenseClass\":\"D\"},{\"MiddleName\":\"M\"},{\"Sex\":\"M\"},{\"Surname\":\"MOZINGO\"}]}}}}"
            }
        ]
    }
  ],
  "RequestUUID": "a040x000002LtbaAAC",
  "CaseId": "",
  "CaseStatus": "",
  "ApplicationId": "APP-M-10332",
  "ApplicantType": "NONNRA",
  "Settings": {
    "AccountNumber": "45065",
    "Workflow": "public.testing.redherrings.open",
    "Mode": "testing",
    "Reference": "Reference1",
    "Locale": "en_US",
    "ConversationId": "31000095253376",
    "Venue": "online"
  },
  "Promotions": {
    "Status": "Finished",
    "PromoCode": "CV0DKA0D",
    "OnboardingInvitation": {
      "EmailAddress": "ana@v.com",
      "PhoneNumber": "2077742915"
    }
  },
  "AccountInformation": {
    "AccountType": "CHK_I_PERS_PREMIER",
    "DepositAccount": {
      "WithholdingIndicator": "ExemptConfirmed",
      "UserCode": "D",
      "StatusCodes": [
        "NeverClose"
      ],
      "BulkFileType": "ImageFile"
    },
    "CardAccount": {
      "NameOnCard": "RIMAS  BROWN",
      "CardDesign": "Black"
    },
    "CustomerToAccountRelationship": {
      "Customer1AccountRelationshipCode": "000",
      "Customer1AccountAssociationType": "Primary",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474",
        "IsForeignAddress": false
      },
      "NumberOfStatementCopies": 1,
      "AddressLineOfTINOwner": 1
    }
  },
  "CustomerInformation": {
    "DateOfBirth": "1987-01-01",
    "FirstName": "RIMAS",
    "LastName": "BROWN",
    "Gender": null,
    "PrimaryLanguage": "English",
    "VisaType": null,
    "ForeignTaxID": null,
    "PrimaryPurposeofAccOpening": null,
    "SourceofFunds": {
      "Source": null,
      "MiscDemographic": 2,
      "CustomerIntentforIntWireTransfer": {
        "TransferServices": false,
        "ForeignOutActivity": {
          "OutgoingWiresAmount": null,
          "OutgoingWires": null,
          "ForeignOutgoingActivity": false
        },
        "ForeignInActivity": {
          "IncomingWiresAmount": null,
          "IncomingWires": null,
          "ForeignIncomingActivity": false
        }
      }
    },
    "CISNumber": "",
    "PEP": "No",
    "Address": {
      "StreetAddress1": "456 Massachusetts Ave",
      "CountryCode": "USA",
      "IsForeignAddress": false,
      "City": "Arlington",
      "State": "MA",
      "Zip": "02474"
    },
    "CountryCode": "+1",
    "MobilePhoneNumber": "2077742915",
    "TaxNumber": "454545454",
    "TaxIdType": "SocialSecurityNumber",
    "CitizenshipCode": "USA",
    "BranchNumber": "8161",
    "CostCenterNumber": "161",
    "CategoryCode1": "903",
    "Occupation": "AgricultureOrFishing",
    "Identification": {
      "Status": "NonDocVerification",
      "NonDocumentaryIdentificationInformation1": "VLN"
    },
    "EmailAddress": "ana@v.com",
    "RequestUUID": "a040x000002LtbaAAC"
  },
  "Documents": []
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="364edc2b-2ff9-484b-a011-61d41f8ef8ec">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			<flow-ref doc:name="Flow-ref to post:\process\submit\presubmission:velo-process-api-config" doc:id="e6f13bc5-cadd-4d47-be58-df54bf715f0c" name="post:\process\submit\presubmission:velo-process-api-config"/>
		</munit:execution>
		
	<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="ecf33594-0d5f-4e75-97ed-f9be607e5d97" message="Payload after test suite run #[payload]"/>
			<munit-tools:assert-that doc:name="Assert that" doc:id="3ae7aa2b-6a47-4d6e-9ad2-888979c891dc" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Pending")]' message="Terafina SSN straight flow Id Authentication result with failed run failed"/>
		</munit:validation>
	</munit:test>
	<munit:test name="WhenPinPointRecommendationStatruIsDeny" description="MUnit Test" doc:id="44e924d6-da6b-499b-abb1-04c96cc9b1c5" >
	<munit:behavior >
			<flow-ref doc:name="PinPointRecommendationAsDeny" doc:id="d91d7101-aec8-4b8e-ac3b-47832c05ba90" name="PinPointRecommendationAsDeny"/>
			<flow-ref doc:name="OFAC-Mock" doc:id="39e30c5b-a580-4191-93de-8b7d6edc1ad0" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="d6b0dcd0-f883-4d00-a08c-ec593b64ba13" name="PepMock"/>
			<flow-ref doc:name="InstantIdAttentionMock" doc:id="3cd1db19-3e0c-46d7-99be-bb737808f452" name="InstantIdAttentionMock"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="125a6ad3-aeec-4a36-925d-b2f25ef7306a" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		<munit:execution >
			<ee:transform doc:name="SetPayload" doc:id="35e35d7f-2791-4e4e-85d7-2829b404ce9a" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "PinPointRequest": [
    {
      "handler": "session_info",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "result": "pass",
      "channel": "online",
      "new_account_data": {
        "new_account": true,
        "first_name": "RIMAS",
        "last_name": "BROWN",
        "phone_number": "12077742915",
        "email": "ana@v.com"
      }
    },
    {
      "handler": "pinpoint_eval",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "activity": "new_account",
      "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
      "timestamp": "2019-01-29 07:21:24"
    }
  ],
  "IdVerificationRequest": {
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "Venue": "online"
    },
    "Person": {
      "Name": {
        "FirstName": "RIMAS",
        "LastName": "BROWN"
      },
      "Addresses": [
        {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip5": "02474-5106",
          "Country": "US",
          "Context": "primary"
        }
      ],
      "SSN": {
        "Number": "454545454",
        "Type": "ssn9"
      },
      "DateOfBirth": {
        "Year": "1987",
        "Month": "1",
        "Day": "1"
      },
      "Phones": [
        {
          "Number": "2077742915",
          "Context": "mobile"
        }
      ]
    }
  },
  "IdAuthenticationResponse": [],
  "RequestUUID": "a040x000002LtbaAAC",
  "CaseId": "",
  "CaseStatus": "",
  "ApplicationId": "APP-M-10332",
  "ApplicantType": "NONNRA",
  "Settings": {
    "AccountNumber": "45065",
    "Workflow": "public.testing.redherrings.open",
    "Mode": "testing",
    "Reference": "Reference1",
    "Locale": "en_US",
    "ConversationId": "31000095253376",
    "Venue": "online"
  },
  "Promotions": {
    "Status": "Finished",
    "PromoCode": "CV0DKA0D",
    "OnboardingInvitation": {
      "EmailAddress": "ana@v.com",
      "PhoneNumber": "2077742915"
    }
  },
  "AccountInformation": {
    "AccountType": "CHK_I_PERS_PREMIER",
    "DepositAccount": {
      "WithholdingIndicator": "ExemptConfirmed",
      "UserCode": "D",
      "StatusCodes": [
        "NeverClose"
      ],
      "BulkFileType": "ImageFile"
    },
    "CardAccount": {
      "NameOnCard": "RIMAS  BROWN",
      "CardDesign": "Black"
    },
    "CustomerToAccountRelationship": {
      "Customer1AccountRelationshipCode": "000",
      "Customer1AccountAssociationType": "Primary",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474",
        "IsForeignAddress": false
      },
      "NumberOfStatementCopies": 1,
      "AddressLineOfTINOwner": 1
    }
  },
  "CustomerInformation": {
    "DateOfBirth": "1987-01-01",
    "FirstName": "RIMAS",
    "LastName": "BROWN",
    "Gender": null,
    "PrimaryLanguage": "English",
    "VisaType": null,
    "ForeignTaxID": null,
    "PrimaryPurposeofAccOpening": null,
    "SourceofFunds": {
      "Source": null,
      "MiscDemographic": 2,
      "CustomerIntentforIntWireTransfer": {
        "TransferServices": false,
        "ForeignOutActivity": {
          "OutgoingWiresAmount": null,
          "OutgoingWires": null,
          "ForeignOutgoingActivity": false
        },
        "ForeignInActivity": {
          "IncomingWiresAmount": null,
          "IncomingWires": null,
          "ForeignIncomingActivity": false
        }
      }
    },
    "CISNumber": "",
    "PEP": "No",
    "Address": {
      "StreetAddress1": "456 Massachusetts Ave",
      "CountryCode": "USA",
      "IsForeignAddress": false,
      "City": "Arlington",
      "State": "MA",
      "Zip": "02474"
    },
    "CountryCode": "+1",
    "MobilePhoneNumber": "2077742915",
    "TaxNumber": "454545454",
    "TaxIdType": "SocialSecurityNumber",
    "CitizenshipCode": "USA",
    "BranchNumber": "8161",
    "CostCenterNumber": "161",
    "CategoryCode1": "903",
    "Occupation": "AgricultureOrFishing",
    "Identification": {
      "Status": "NonDocVerification",
      "NonDocumentaryIdentificationInformation1": "VLN"
    },
    "EmailAddress": "ana@v.com",
    "RequestUUID": "a040x000002LtbaAAC"
  },
  "Documents": []
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="e6bea37f-9295-479e-a2ec-02de520fb6d7">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			<flow-ref doc:name="Flow-ref to post:\process\submit\presubmission:velo-process-api-config" doc:id="25182e9e-1a18-42c4-ba18-292dcff464c3" name="post:\process\submit\presubmission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation>
		<logger level="INFO" doc:name="Logger" doc:id="46ed5067-7f38-43b2-a63d-b8ad6733357c" message="Payload after test suite run #[payload]"/>
			<munit-tools:assert-that doc:name="Assert that" doc:id="d456cc67-526e-421e-b3d3-fd92098b9bf7" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Declined")]' message="Terafina SSN flow PinPoint Recommendation type deny test failed"/>
		</munit:validation>
	</munit:test>
	<munit:test name="WhenPinPointRecommendationIsUnknown" description="MUnit Test" doc:id="5ffa0fde-50f6-415a-a0bb-1b15c9284791" >
	<munit:behavior >
			<flow-ref doc:name="PinPointInvalidOrUnknownRecommendation" doc:id="e684b1dd-3f7c-4237-8b2a-0ca64fafa94b" name="PinPointInvalidOrUnknownRecommendation"/>
			<flow-ref doc:name="OFAC-Mock" doc:id="0164e4a4-adf1-4bde-aead-f9a1c3e8dfb5" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="75534a21-a2d3-4815-8740-76d284d9682a" name="PepMock"/>
			<flow-ref doc:name="InstantIdAttentionMock" doc:id="01e95233-9e68-4aaf-88fe-1887e2b1e330" name="InstantIdAttentionMock"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="6fa19334-8f17-429e-b521-9a0fcdc1add9" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		<munit:execution >
			<ee:transform doc:name="SetPayload" doc:id="ea9d855d-e3d7-4a8b-b639-a967ade54f22" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "PinPointRequest": [
    {
      "handler": "session_info",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "result": "pass",
      "channel": "online",
      "new_account_data": {
        "new_account": true,
        "first_name": "RIMAS",
        "last_name": "BROWN",
        "phone_number": "12077742915",
        "email": "ana@v.com"
      }
    },
    {
      "handler": "pinpoint_eval",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "activity": "new_account",
      "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
      "timestamp": "2019-01-29 07:21:24"
    }
  ],
  "IdVerificationRequest": {
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "Venue": "online"
    },
    "Person": {
      "Name": {
        "FirstName": "RIMAS",
        "LastName": "BROWN"
      },
      "Addresses": [
        {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip5": "02474-5106",
          "Country": "US",
          "Context": "primary"
        }
      ],
      "SSN": {
        "Number": "454545454",
        "Type": "ssn9"
      },
      "DateOfBirth": {
        "Year": "1987",
        "Month": "1",
        "Day": "1"
      },
      "Phones": [
        {
          "Number": "2077742915",
          "Context": "mobile"
        }
      ]
    }
  },
  "IdAuthenticationResponse": [],
  "RequestUUID": "a040x000002LtbaAAC",
  "CaseId": "",
  "CaseStatus": "",
  "ApplicationId": "APP-M-10332",
  "ApplicantType": "NONNRA",
  "Settings": {
    "AccountNumber": "45065",
    "Workflow": "public.testing.redherrings.open",
    "Mode": "testing",
    "Reference": "Reference1",
    "Locale": "en_US",
    "ConversationId": "31000095253376",
    "Venue": "online"
  },
  "Promotions": {
    "Status": "Finished",
    "PromoCode": "CV0DKA0D",
    "OnboardingInvitation": {
      "EmailAddress": "ana@v.com",
      "PhoneNumber": "2077742915"
    }
  },
  "AccountInformation": {
    "AccountType": "CHK_I_PERS_PREMIER",
    "DepositAccount": {
      "WithholdingIndicator": "ExemptConfirmed",
      "UserCode": "D",
      "StatusCodes": [
        "NeverClose"
      ],
      "BulkFileType": "ImageFile"
    },
    "CardAccount": {
      "NameOnCard": "RIMAS  BROWN",
      "CardDesign": "Black"
    },
    "CustomerToAccountRelationship": {
      "Customer1AccountRelationshipCode": "000",
      "Customer1AccountAssociationType": "Primary",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474",
        "IsForeignAddress": false
      },
      "NumberOfStatementCopies": 1,
      "AddressLineOfTINOwner": 1
    }
  },
  "CustomerInformation": {
    "DateOfBirth": "1987-01-01",
    "FirstName": "RIMAS",
    "LastName": "BROWN",
    "Gender": null,
    "PrimaryLanguage": "English",
    "VisaType": null,
    "ForeignTaxID": null,
    "PrimaryPurposeofAccOpening": null,
    "SourceofFunds": {
      "Source": null,
      "MiscDemographic": 2,
      "CustomerIntentforIntWireTransfer": {
        "TransferServices": false,
        "ForeignOutActivity": {
          "OutgoingWiresAmount": null,
          "OutgoingWires": null,
          "ForeignOutgoingActivity": false
        },
        "ForeignInActivity": {
          "IncomingWiresAmount": null,
          "IncomingWires": null,
          "ForeignIncomingActivity": false
        }
      }
    },
    "CISNumber": "",
    "PEP": "No",
    "Address": {
      "StreetAddress1": "456 Massachusetts Ave",
      "CountryCode": "USA",
      "IsForeignAddress": false,
      "City": "Arlington",
      "State": "MA",
      "Zip": "02474"
    },
    "CountryCode": "+1",
    "MobilePhoneNumber": "2077742915",
    "TaxNumber": "454545454",
    "TaxIdType": "SocialSecurityNumber",
    "CitizenshipCode": "USA",
    "BranchNumber": "8161",
    "CostCenterNumber": "161",
    "CategoryCode1": "903",
    "Occupation": "AgricultureOrFishing",
    "Identification": {
      "Status": "NonDocVerification",
      "NonDocumentaryIdentificationInformation1": "VLN"
    },
    "EmailAddress": "ana@v.com",
    "RequestUUID": "a040x000002LtbaAAC"
  },
  "Documents": []
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="86af775b-f73c-46ac-a1e8-03cb71842841">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			<flow-ref doc:name="Flow-ref to post:\process\submit\presubmission:velo-process-api-config" doc:id="fe2b0645-b6cc-41b0-bfce-8558128d2a40" name="post:\process\submit\presubmission:velo-process-api-config"/>
		</munit:execution>
		
		<munit:validation>
		<logger level="INFO" doc:name="Logger" doc:id="d353ac35-3b5a-4574-ad7f-09c14fe52ada" message="Payload after test suite run #[payload]"/>
			<munit-tools:assert-that doc:name="Assert that" doc:id="e927185e-d4dd-4ae3-b3da-32f4046f1ab4" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Pending")]' message="Terafina SSN flow PinPoint Unknown Recommendation type test failed"/>
		</munit:validation>
	</munit:test>
	<munit:test name="WhenPinPointStatusIsError" description="MUnit Test" doc:id="e6789fec-ed4d-4684-9457-c598fec272e7" >
	<munit:behavior >
			<flow-ref doc:name="PinPointStatusIsError" doc:id="972f1cb9-5780-403e-8859-b597a9cdb39d" name="PinPointStatusIsError"/>
			<flow-ref doc:name="OFAC-Mock" doc:id="5e468539-d7b9-4ee0-891c-aa6419e2090c" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="c4a49d00-b5b1-4fb4-b24e-82c4324faed8" name="PepMock"/>
			<flow-ref doc:name="InstantIdAttentionMock" doc:id="bab7ada3-fd47-4c81-b000-80c332416d95" name="InstantIdAttentionMock"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="1a91e311-11b6-41c5-981a-5570b6c8e56a" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		<munit:execution >		
			<ee:transform doc:name="SetPayload" doc:id="38424045-4207-431b-a2b0-22da5614ec8d" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "PinPointRequest": [
    {
      "handler": "session_info",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "result": "pass",
      "channel": "online",
      "new_account_data": {
        "new_account": true,
        "first_name": "RIMAS",
        "last_name": "BROWN",
        "phone_number": "12077742915",
        "email": "ana@v.com"
      }
    },
    {
      "handler": "pinpoint_eval",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "activity": "new_account",
      "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
      "timestamp": "2019-01-29 07:21:24"
    }
  ],
  "IdVerificationRequest": {
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "Venue": "online"
    },
    "Person": {
      "Name": {
        "FirstName": "RIMAS",
        "LastName": "BROWN"
      },
      "Addresses": [
        {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip5": "02474-5106",
          "Country": "US",
          "Context": "primary"
        }
      ],
      "SSN": {
        "Number": "454545454",
        "Type": "ssn9"
      },
      "DateOfBirth": {
        "Year": "1987",
        "Month": "1",
        "Day": "1"
      },
      "Phones": [
        {
          "Number": "2077742915",
          "Context": "mobile"
        }
      ]
    }
  },
  "IdAuthenticationResponse": [],
  "RequestUUID": "a040x000002LtbaAAC",
  "CaseId": "",
  "CaseStatus": "",
  "ApplicationId": "APP-M-10332",
  "ApplicantType": "NONNRA",
  "Settings": {
    "AccountNumber": "45065",
    "Workflow": "public.testing.redherrings.open",
    "Mode": "testing",
    "Reference": "Reference1",
    "Locale": "en_US",
    "ConversationId": "31000095253376",
    "Venue": "online"
  },
  "Promotions": {
    "Status": "Finished",
    "PromoCode": "CV0DKA0D",
    "OnboardingInvitation": {
      "EmailAddress": "ana@v.com",
      "PhoneNumber": "2077742915"
    }
  },
  "AccountInformation": {
    "AccountType": "CHK_I_PERS_PREMIER",
    "DepositAccount": {
      "WithholdingIndicator": "ExemptConfirmed",
      "UserCode": "D",
      "StatusCodes": [
        "NeverClose"
      ],
      "BulkFileType": "ImageFile"
    },
    "CardAccount": {
      "NameOnCard": "RIMAS  BROWN",
      "CardDesign": "Black"
    },
    "CustomerToAccountRelationship": {
      "Customer1AccountRelationshipCode": "000",
      "Customer1AccountAssociationType": "Primary",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474",
        "IsForeignAddress": false
      },
      "NumberOfStatementCopies": 1,
      "AddressLineOfTINOwner": 1
    }
  },
  "CustomerInformation": {
    "DateOfBirth": "1987-01-01",
    "FirstName": "RIMAS",
    "LastName": "BROWN",
    "Gender": null,
    "PrimaryLanguage": "English",
    "VisaType": null,
    "ForeignTaxID": null,
    "PrimaryPurposeofAccOpening": null,
    "SourceofFunds": {
      "Source": null,
      "MiscDemographic": 2,
      "CustomerIntentforIntWireTransfer": {
        "TransferServices": false,
        "ForeignOutActivity": {
          "OutgoingWiresAmount": null,
          "OutgoingWires": null,
          "ForeignOutgoingActivity": false
        },
        "ForeignInActivity": {
          "IncomingWiresAmount": null,
          "IncomingWires": null,
          "ForeignIncomingActivity": false
        }
      }
    },
    "CISNumber": "",
    "PEP": "No",
    "Address": {
      "StreetAddress1": "456 Massachusetts Ave",
      "CountryCode": "USA",
      "IsForeignAddress": false,
      "City": "Arlington",
      "State": "MA",
      "Zip": "02474"
    },
    "CountryCode": "+1",
    "MobilePhoneNumber": "2077742915",
    "TaxNumber": "454545454",
    "TaxIdType": "SocialSecurityNumber",
    "CitizenshipCode": "USA",
    "BranchNumber": "8161",
    "CostCenterNumber": "161",
    "CategoryCode1": "903",
    "Occupation": "AgricultureOrFishing",
    "Identification": {
      "Status": "NonDocVerification",
      "NonDocumentaryIdentificationInformation1": "VLN"
    },
    "EmailAddress": "ana@v.com",
    "RequestUUID": "a040x000002LtbaAAC"
  },
  "Documents": []
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="240cdae2-bf36-40e4-9c10-82c2451785f1">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			<flow-ref doc:name="Flow-ref to post:\process\submit\presubmission:velo-process-api-config" doc:id="63bdb88a-1a93-42b2-aaf3-56d600cc8ef8" name="post:\process\submit\presubmission:velo-process-api-config"/>
		</munit:execution>
		
		<munit:validation>
		<logger level="INFO" doc:name="Logger" doc:id="bed64924-f6f1-4995-87fe-92dd5e711c5a" message="Payload after test suite run #[payload]"/>
			<munit-tools:assert-that doc:name="Assert that" doc:id="9ba187f5-224a-40af-a583-51483828cf3c" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Pending")]' message="Terafina SSN flow PinPoint Unknown Recommendation type test failed"/>
		</munit:validation>
	</munit:test>
	<munit:test name="IDVOnlyAndDeclineScenario" description="Test" doc:id="1c4e5b15-7291-48af-9938-bd195a89f2a2" ignore="true">
		<munit:behavior >
			<flow-ref doc:name="PinpointSuccessMockSub_Flow" doc:id="1572b626-41ec-4b08-99e8-236353df7a96" name="PinpointSuccessMockSub_Flow"/>
			<flow-ref doc:name="OFAC-Mock" doc:id="d252f0fe-9d57-43f6-a00a-ea7670edf356" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="91ffd0aa-452c-4116-8774-0309f2aa76af" name="PepMock"/>
			<munit-tools:mock-when doc:name="Mocking Promo Update" doc:id="02768c97-f508-4a87-9730-54ba7685e0b8" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute attributeName="doc:id" whereValue="f307805f-045e-43b2-92fa-53dccc67236d" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="updatePromocodeResponse" value='#[output application/json --- ""]' mediaType="application/json" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<flow-ref doc:name="InstantIdAttentionMock_declined_status" doc:id="92ff432a-753c-42b7-8ad5-d3b0e25abda1" name="InstantIdAttentionMock_declined_status"/>
			<flow-ref doc:name="FISCheckingAccountTerafinaFlowMock" doc:id="5f429185-dfd1-4b60-83b7-6b049324e3df" name="FISCheckingAccountTerafinaFlowMock"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="d5165634-8d9b-4115-9719-d7908437a40d" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		
		<munit:execution >
			<ee:transform doc:name="SetPayload" doc:id="31360920-856a-45be-a535-79efcb2372f0" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "PinPointRequest": [
    {
      "handler": "session_info",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "result": "pass",
      "channel": "online",
      "new_account_data": {
        "new_account": true,
        "first_name": "RIMAS",
        "last_name": "BROWN",
        "phone_number": "12077742915",
        "email": "ana@v.com"
      }
    },
    {
      "handler": "pinpoint_eval",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "activity": "new_account",
      "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
      "timestamp": "2019-01-29 07:21:24"
    }
  ],
  "IdVerificationRequest": {
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "Venue": "online"
    },
    "Person": {
      "Name": {
        "FirstName": "RIMAS",
        "LastName": "BROWN"
      },
      "Addresses": [
        {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip5": "02474-5106",
          "Country": "US",
          "Context": "primary"
        }
      ],
      "SSN": {
        "Number": "454545454",
        "Type": "ssn9"
      },
      "DateOfBirth": {
        "Year": "1987",
        "Month": "1",
        "Day": "1"
      },
      "Phones": [
        {
          "Number": "2077742915",
          "Context": "mobile"
        }
      ]
    }
  },
  "IdAuthenticationResponse": [],
  "RequestUUID": "a040x000002LtbaAAC",
  "CaseId": "",
  "CaseStatus": "",
  "ApplicationId": "APP-M-10332",
  "ApplicantType": "NONNRA",
  "Settings": {
    "AccountNumber": "45065",
    "Workflow": "public.testing.redherrings.open",
    "Mode": "testing",
    "Reference": "Reference1",
    "Locale": "en_US",
    "ConversationId": "31000095253376",
    "Venue": "online"
  },
  "Promotions": {
    "Status": "Finished",
    "PromoCode": "CV0DKA0D",
    "OnboardingInvitation": {
      "EmailAddress": "ana@v.com",
      "PhoneNumber": "2077742915"
    }
  },
  "AccountInformation": {
    "AccountType": "CHK_I_PERS_PREMIER",
    "DepositAccount": {
      "WithholdingIndicator": "ExemptConfirmed",
      "UserCode": "D",
      "StatusCodes": [
        "NeverClose"
      ],
      "BulkFileType": "ImageFile"
    },
    "CardAccount": {
      "NameOnCard": "RIMAS  BROWN",
      "CardDesign": "Black"
    },
    "CustomerToAccountRelationship": {
      "Customer1AccountRelationshipCode": "000",
      "Customer1AccountAssociationType": "Primary",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474",
        "IsForeignAddress": false
      },
      "NumberOfStatementCopies": 1,
      "AddressLineOfTINOwner": 1
    }
  },
  "CustomerInformation": {
    "DateOfBirth": "1987-01-01",
    "FirstName": "RIMAS",
    "LastName": "BROWN",
    "Gender": null,
    "PrimaryLanguage": "English",
    "VisaType": null,
    "ForeignTaxID": null,
    "PrimaryPurposeofAccOpening": null,
    "SourceofFunds": {
      "Source": null,
      "MiscDemographic": 2,
      "CustomerIntentforIntWireTransfer": {
        "TransferServices": false,
        "ForeignOutActivity": {
          "OutgoingWiresAmount": null,
          "OutgoingWires": null,
          "ForeignOutgoingActivity": false
        },
        "ForeignInActivity": {
          "IncomingWiresAmount": null,
          "IncomingWires": null,
          "ForeignIncomingActivity": false
        }
      }
    },
    "CISNumber": "",
    "PEP": "No",
    "Address": {
      "StreetAddress1": "456 Massachusetts Ave",
      "CountryCode": "USA",
      "IsForeignAddress": false,
      "City": "Arlington",
      "State": "MA",
      "Zip": "02474"
    },
    "CountryCode": "+1",
    "MobilePhoneNumber": "2077742915",
    "TaxNumber": "454545454",
    "TaxIdType": "SocialSecurityNumber",
    "CitizenshipCode": "USA",
    "BranchNumber": "8161",
    "CostCenterNumber": "161",
    "CategoryCode1": "903",
    "Occupation": "AgricultureOrFishing",
    "Identification": {
      "Status": "NonDocVerification",
      "NonDocumentaryIdentificationInformation1": "VLN"
    },
    "EmailAddress": "ana@v.com",
    "RequestUUID": "a040x000002LtbaAAC"
  },
  "Documents": []
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="b836d6b7-ab0a-4fdf-8246-0670a1122ec6">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			<flow-ref doc:name="Flow-ref to post:\process\submit\presubmission:velo-process-api-config" doc:id="1fb852b7-a64f-452e-bf0c-03efe7ad63bc" name="post:\process\submit\presubmission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="7d6ca2b2-3f37-429d-9ca2-7d8f54f84954" message="Payload after test suite run #[payload]"/>
			<munit-tools:assert-that doc:name="Assert that" doc:id="e86ffd15-f73d-48c4-b535-dc6ad2459dd6" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Declined")]' message="Terafina SSN straight flow for ID verification failed"/>
		</munit:validation>
	</munit:test>
	<munit:test name="IDVOnlyAndPendingScenario" description="Test" doc:id="1861c9c6-61b8-4030-a328-ddf3934f3f1b">
		<munit:behavior >
			<flow-ref doc:name="PinpointSuccessMockSub_Flow" doc:id="feea1a5b-c8f7-4df7-b9f8-1af4d78beb8f" name="PinpointSuccessMockSub_Flow"/>
			<flow-ref doc:name="OFAC-Mock" doc:id="72b641cc-dcc6-4d8d-8190-2bb265855cc0" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="302436e3-f7aa-4c1b-be7f-eb34e9e3110e" name="PepMock"/>
			<munit-tools:mock-when doc:name="Mocking Promo Update" doc:id="ce57a65d-a0ba-4cc4-aa2d-c07f573629d1" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute attributeName="doc:id" whereValue="f307805f-045e-43b2-92fa-53dccc67236d" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="updatePromocodeResponse" value='#[output application/json --- ""]' mediaType="application/json" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<flow-ref doc:name="InstantIdAttentionMock_pending_status" doc:id="cf6edea5-b7bc-433d-8772-0ca59af0b6d6" name="InstantIdAttentionMock_pending_status"/>
			<flow-ref doc:name="FISCheckingAccountTerafinaFlowMock" doc:id="722fc7f2-4100-4642-beab-516af4299fdb" name="FISCheckingAccountTerafinaFlowMock"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="d11e8630-6abc-4288-a545-6e5d45573f60" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		
		<munit:execution >
			<ee:transform doc:name="SetPayload" doc:id="2a059045-e51f-4c62-b74c-f60dfd0c6187" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "PinPointRequest": [
    {
      "handler": "session_info",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "result": "pass",
      "channel": "online",
      "new_account_data": {
        "new_account": true,
        "first_name": "RIMAS",
        "last_name": "BROWN",
        "phone_number": "12077742915",
        "email": "ana@v.com"
      }
    },
    {
      "handler": "pinpoint_eval",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "activity": "new_account",
      "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
      "timestamp": "2019-01-29 07:21:24"
    }
  ],
  "IdVerificationRequest": {
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "Venue": "online"
    },
    "Person": {
      "Name": {
        "FirstName": "RIMAS",
        "LastName": "BROWN"
      },
      "Addresses": [
        {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip5": "02474-5106",
          "Country": "US",
          "Context": "primary"
        }
      ],
      "SSN": {
        "Number": "454545454",
        "Type": "ssn9"
      },
      "DateOfBirth": {
        "Year": "1987",
        "Month": "1",
        "Day": "1"
      },
      "Phones": [
        {
          "Number": "2077742915",
          "Context": "mobile"
        }
      ]
    }
  },
  "IdAuthenticationResponse": [],
  "RequestUUID": "a040x000002LtbaAAC",
  "CaseId": "",
  "CaseStatus": "",
  "ApplicationId": "APP-M-10332",
  "ApplicantType": "NONNRA",
  "Settings": {
    "AccountNumber": "45065",
    "Workflow": "public.testing.redherrings.open",
    "Mode": "testing",
    "Reference": "Reference1",
    "Locale": "en_US",
    "ConversationId": "31000095253376",
    "Venue": "online"
  },
  "Promotions": {
    "Status": "Finished",
    "PromoCode": "CV0DKA0D",
    "OnboardingInvitation": {
      "EmailAddress": "ana@v.com",
      "PhoneNumber": "2077742915"
    }
  },
  "AccountInformation": {
    "AccountType": "CHK_I_PERS_PREMIER",
    "DepositAccount": {
      "WithholdingIndicator": "ExemptConfirmed",
      "UserCode": "D",
      "StatusCodes": [
        "NeverClose"
      ],
      "BulkFileType": "ImageFile"
    },
    "CardAccount": {
      "NameOnCard": "RIMAS  BROWN",
      "CardDesign": "Black"
    },
    "CustomerToAccountRelationship": {
      "Customer1AccountRelationshipCode": "000",
      "Customer1AccountAssociationType": "Primary",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474",
        "IsForeignAddress": false
      },
      "NumberOfStatementCopies": 1,
      "AddressLineOfTINOwner": 1
    }
  },
  "CustomerInformation": {
    "DateOfBirth": "1987-01-01",
    "FirstName": "RIMAS",
    "LastName": "BROWN",
    "Gender": null,
    "PrimaryLanguage": "English",
    "VisaType": null,
    "ForeignTaxID": null,
    "PrimaryPurposeofAccOpening": null,
    "SourceofFunds": {
      "Source": null,
      "MiscDemographic": 2,
      "CustomerIntentforIntWireTransfer": {
        "TransferServices": false,
        "ForeignOutActivity": {
          "OutgoingWiresAmount": null,
          "OutgoingWires": null,
          "ForeignOutgoingActivity": false
        },
        "ForeignInActivity": {
          "IncomingWiresAmount": null,
          "IncomingWires": null,
          "ForeignIncomingActivity": false
        }
      }
    },
    "CISNumber": "",
    "PEP": "No",
    "Address": {
      "StreetAddress1": "456 Massachusetts Ave",
      "CountryCode": "USA",
      "IsForeignAddress": false,
      "City": "Arlington",
      "State": "MA",
      "Zip": "02474"
    },
    "CountryCode": "+1",
    "MobilePhoneNumber": "2077742915",
    "TaxNumber": "454545454",
    "TaxIdType": "SocialSecurityNumber",
    "CitizenshipCode": "USA",
    "BranchNumber": "8161",
    "CostCenterNumber": "161",
    "CategoryCode1": "903",
    "Occupation": "AgricultureOrFishing",
    "Identification": {
      "Status": "NonDocVerification",
      "NonDocumentaryIdentificationInformation1": "VLN"
    },
    "EmailAddress": "ana@v.com",
    "RequestUUID": "a040x000002LtbaAAC"
  },
  "Documents": []
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="e041cc21-6c68-49ca-863c-a3d7d2d6b1f9">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			<flow-ref doc:name="Flow-ref to post:\process\submit\presubmission:velo-process-api-config" doc:id="f348b573-8299-46e8-8478-aae25113e549" name="post:\process\submit\presubmission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="ecf8e01d-c1d4-41d4-8d9b-84270937f552" message="Payload after test suite run #[payload]"/>
			<munit-tools:assert-that doc:name="Assert that" doc:id="8e73e76d-8afa-4e50-99f0-d9b3720b39ef" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Pending")]' message="Terafina SSN straight flow for ID verification failed"/>
		</munit:validation>
	</munit:test>
		<munit:test name="IDVOnlyAndFailedScenario" description="Test" doc:id="b78604d0-7170-4925-b2a5-84c2415532c4" ignore="true">
		<munit:behavior >
			<flow-ref doc:name="PinpointSuccessMockSub_Flow" doc:id="6867875a-c853-457a-8d13-aa04e31f99d4" name="PinpointSuccessMockSub_Flow"/>
			<flow-ref doc:name="OFAC-Mock" doc:id="cfabd29a-3601-4a68-a40f-e7d46b7117df" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="f72e555c-9b7b-4377-9f40-9c011f5a1c63" name="PepMock"/>
			<munit-tools:mock-when doc:name="Mocking Promo Update" doc:id="7e38085d-f3e0-453d-a4bf-1c08f896ef0b" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute attributeName="doc:id" whereValue="f307805f-045e-43b2-92fa-53dccc67236d" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="updatePromocodeResponse" value='#[output application/json --- ""]' mediaType="application/json" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<flow-ref doc:name="InstantIdAttentionMock_failed_status" doc:id="fe85859d-68e2-4ae2-a516-282b71038be4" name="InstantIdAttentionMock_failed_status"/>
			<flow-ref doc:name="FISCheckingAccountTerafinaFlowMock" doc:id="3f5dc7c8-020c-49de-9574-7c1829e3298f" name="FISCheckingAccountTerafinaFlowMock"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="a376fc7c-59c8-4209-b42d-cf4315000ab9" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		
		<munit:execution >
			<ee:transform doc:name="SetPayload" doc:id="6cb9517c-5f12-487b-a4c9-06d7fc9d4001" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "PinPointRequest": [
    {
      "handler": "session_info",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "result": "pass",
      "channel": "online",
      "new_account_data": {
        "new_account": true,
        "first_name": "RIMAS",
        "last_name": "BROWN",
        "phone_number": "12077742915",
        "email": "ana@v.com"
      }
    },
    {
      "handler": "pinpoint_eval",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "activity": "new_account",
      "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
      "timestamp": "2019-01-29 07:21:24"
    }
  ],
  "IdVerificationRequest": {
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "Venue": "online"
    },
    "Person": {
      "Name": {
        "FirstName": "RIMAS",
        "LastName": "BROWN"
      },
      "Addresses": [
        {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip5": "02474-5106",
          "Country": "US",
          "Context": "primary"
        }
      ],
      "SSN": {
        "Number": "454545454",
        "Type": "ssn9"
      },
      "DateOfBirth": {
        "Year": "1987",
        "Month": "1",
        "Day": "1"
      },
      "Phones": [
        {
          "Number": "2077742915",
          "Context": "mobile"
        }
      ]
    }
  },
  "IdAuthenticationResponse": [],
  "RequestUUID": "a040x000002LtbaAAC",
  "CaseId": "",
  "CaseStatus": "",
  "ApplicationId": "APP-M-10332",
  "ApplicantType": "NONNRA",
  "Settings": {
    "AccountNumber": "45065",
    "Workflow": "public.testing.redherrings.open",
    "Mode": "testing",
    "Reference": "Reference1",
    "Locale": "en_US",
    "ConversationId": "31000095253376",
    "Venue": "online"
  },
  "Promotions": {
    "Status": "Finished",
    "PromoCode": "CV0DKA0D",
    "OnboardingInvitation": {
      "EmailAddress": "ana@v.com",
      "PhoneNumber": "2077742915"
    }
  },
  "AccountInformation": {
    "AccountType": "CHK_I_PERS_PREMIER",
    "DepositAccount": {
      "WithholdingIndicator": "ExemptConfirmed",
      "UserCode": "D",
      "StatusCodes": [
        "NeverClose"
      ],
      "BulkFileType": "ImageFile"
    },
    "CardAccount": {
      "NameOnCard": "RIMAS  BROWN",
      "CardDesign": "Black"
    },
    "CustomerToAccountRelationship": {
      "Customer1AccountRelationshipCode": "000",
      "Customer1AccountAssociationType": "Primary",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474",
        "IsForeignAddress": false
      },
      "NumberOfStatementCopies": 1,
      "AddressLineOfTINOwner": 1
    }
  },
  "CustomerInformation": {
    "DateOfBirth": "1987-01-01",
    "FirstName": "RIMAS",
    "LastName": "BROWN",
    "Gender": null,
    "PrimaryLanguage": "English",
    "VisaType": null,
    "ForeignTaxID": null,
    "PrimaryPurposeofAccOpening": null,
    "SourceofFunds": {
      "Source": null,
      "MiscDemographic": 2,
      "CustomerIntentforIntWireTransfer": {
        "TransferServices": false,
        "ForeignOutActivity": {
          "OutgoingWiresAmount": null,
          "OutgoingWires": null,
          "ForeignOutgoingActivity": false
        },
        "ForeignInActivity": {
          "IncomingWiresAmount": null,
          "IncomingWires": null,
          "ForeignIncomingActivity": false
        }
      }
    },
    "CISNumber": "",
    "PEP": "No",
    "Address": {
      "StreetAddress1": "456 Massachusetts Ave",
      "CountryCode": "USA",
      "IsForeignAddress": false,
      "City": "Arlington",
      "State": "MA",
      "Zip": "02474"
    },
    "CountryCode": "+1",
    "MobilePhoneNumber": "2077742915",
    "TaxNumber": "454545454",
    "TaxIdType": "SocialSecurityNumber",
    "CitizenshipCode": "USA",
    "BranchNumber": "8161",
    "CostCenterNumber": "161",
    "CategoryCode1": "903",
    "Occupation": "AgricultureOrFishing",
    "Identification": {
      "Status": "NonDocVerification",
      "NonDocumentaryIdentificationInformation1": "VLN"
    },
    "EmailAddress": "ana@v.com",
    "RequestUUID": "a040x000002LtbaAAC"
  },
  "Documents": []
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="e3313da4-bcce-4c3e-9a60-9400a11a8a57">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			<flow-ref doc:name="Flow-ref to post:\process\submit\presubmission:velo-process-api-config" doc:id="18bf46e1-e0bd-4ba4-ae30-ba78fcea23ba" name="post:\process\submit\presubmission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="cfecc896-2013-45ad-b7c3-021a4017b7be" message="Payload after test suite run #[payload]"/>
			<munit-tools:assert-that doc:name="Assert that" doc:id="280518c9-0b80-4491-8ea9-7e87380e8580" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Declined")]' message="Terafina SSN straight flow for ID verification failed"/>
		</munit:validation>
	</munit:test>
		<munit:test name="IDVOnlyAndDefaultScenario" description="Test" doc:id="aeda9888-27a6-411e-bcf1-bc99b6933cac">
		<munit:behavior >
			<flow-ref doc:name="PinpointSuccessMockSub_Flow" doc:id="9492609b-1b1f-4ed6-b4ab-457dc3e426af" name="PinpointSuccessMockSub_Flow"/>
			<flow-ref doc:name="OFAC-Mock" doc:id="749c605f-d416-4928-acb2-4cb5b1ed38d2" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="123073c0-6706-4e58-8842-7940d08b2562" name="PepMock"/>
			<munit-tools:mock-when doc:name="Mocking Promo Update" doc:id="53b34dbf-e077-4967-9458-1af73c2881de" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute attributeName="doc:id" whereValue="f307805f-045e-43b2-92fa-53dccc67236d" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="updatePromocodeResponse" value='#[output application/json --- ""]' mediaType="application/json" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<flow-ref doc:name="InstantIdAttentionMock_default_status" doc:id="3068dcaa-ecf5-48ce-a2bc-8140b90dbac0" name="InstantIdAttentionMock_default_status"/>
			<flow-ref doc:name="FISCheckingAccountTerafinaFlowMock" doc:id="98079ae8-70fb-4a69-a35c-1ee09905276c" name="FISCheckingAccountTerafinaFlowMock"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="ee311aeb-946b-468a-a54c-6b43136acf9b" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		
		<munit:execution >
			<ee:transform doc:name="SetPayload" doc:id="b711ee81-fc1f-4144-9fac-5d90c6484069" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "PinPointRequest": [
    {
      "handler": "session_info",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "result": "pass",
      "channel": "online",
      "new_account_data": {
        "new_account": true,
        "first_name": "RIMAS",
        "last_name": "BROWN",
        "phone_number": "12077742915",
        "email": "ana@v.com"
      }
    },
    {
      "handler": "pinpoint_eval",
      "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
      "remote_addr": "59.165.215.253",
      "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
      "activity": "new_account",
      "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
      "timestamp": "2019-01-29 07:21:24"
    }
  ],
  "IdVerificationRequest": {
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "Venue": "online"
    },
    "Person": {
      "Name": {
        "FirstName": "RIMAS",
        "LastName": "BROWN"
      },
      "Addresses": [
        {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip5": "02474-5106",
          "Country": "US",
          "Context": "primary"
        }
      ],
      "SSN": {
        "Number": "454545454",
        "Type": "ssn9"
      },
      "DateOfBirth": {
        "Year": "1987",
        "Month": "1",
        "Day": "1"
      },
      "Phones": [
        {
          "Number": "2077742915",
          "Context": "mobile"
        }
      ]
    }
  },
  "IdAuthenticationResponse": [],
  "RequestUUID": "a040x000002LtbaAAC",
  "CaseId": "",
  "CaseStatus": "",
  "ApplicationId": "APP-M-10332",
  "ApplicantType": "NONNRA",
  "Settings": {
    "AccountNumber": "45065",
    "Workflow": "public.testing.redherrings.open",
    "Mode": "testing",
    "Reference": "Reference1",
    "Locale": "en_US",
    "ConversationId": "31000095253376",
    "Venue": "online"
  },
  "Promotions": {
    "Status": "Finished",
    "PromoCode": "CV0DKA0D",
    "OnboardingInvitation": {
      "EmailAddress": "ana@v.com",
      "PhoneNumber": "2077742915"
    }
  },
  "AccountInformation": {
    "AccountType": "CHK_I_PERS_PREMIER",
    "DepositAccount": {
      "WithholdingIndicator": "ExemptConfirmed",
      "UserCode": "D",
      "StatusCodes": [
        "NeverClose"
      ],
      "BulkFileType": "ImageFile"
    },
    "CardAccount": {
      "NameOnCard": "RIMAS  BROWN",
      "CardDesign": "Black"
    },
    "CustomerToAccountRelationship": {
      "Customer1AccountRelationshipCode": "000",
      "Customer1AccountAssociationType": "Primary",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474",
        "IsForeignAddress": false
      },
      "NumberOfStatementCopies": 1,
      "AddressLineOfTINOwner": 1
    }
  },
  "CustomerInformation": {
    "DateOfBirth": "1987-01-01",
    "FirstName": "RIMAS",
    "LastName": "BROWN",
    "Gender": null,
    "PrimaryLanguage": "English",
    "VisaType": null,
    "ForeignTaxID": null,
    "PrimaryPurposeofAccOpening": null,
    "SourceofFunds": {
      "Source": null,
      "MiscDemographic": 2,
      "CustomerIntentforIntWireTransfer": {
        "TransferServices": false,
        "ForeignOutActivity": {
          "OutgoingWiresAmount": null,
          "OutgoingWires": null,
          "ForeignOutgoingActivity": false
        },
        "ForeignInActivity": {
          "IncomingWiresAmount": null,
          "IncomingWires": null,
          "ForeignIncomingActivity": false
        }
      }
    },
    "CISNumber": "",
    "PEP": "No",
    "Address": {
      "StreetAddress1": "456 Massachusetts Ave",
      "CountryCode": "USA",
      "IsForeignAddress": false,
      "City": "Arlington",
      "State": "MA",
      "Zip": "02474"
    },
    "CountryCode": "+1",
    "MobilePhoneNumber": "2077742915",
    "TaxNumber": "454545454",
    "TaxIdType": "SocialSecurityNumber",
    "CitizenshipCode": "USA",
    "BranchNumber": "8161",
    "CostCenterNumber": "161",
    "CategoryCode1": "903",
    "Occupation": "AgricultureOrFishing",
    "Identification": {
      "Status": "NonDocVerification",
      "NonDocumentaryIdentificationInformation1": "VLN"
    },
    "EmailAddress": "ana@v.com",
    "RequestUUID": "a040x000002LtbaAAC"
  },
  "Documents": []
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="3151af04-e6a8-4696-b8e4-fc658b2eb6a1">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			<flow-ref doc:name="Flow-ref to post:\process\submit\presubmission:velo-process-api-config" doc:id="1eabb962-c613-477a-b8cd-8b7a18e7631d" name="post:\process\submit\presubmission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="f4f10456-2dbe-4333-8cb5-dfa2ce1c14ed" message="Payload after test suite run #[payload]"/>
			<munit-tools:assert-that doc:name="Assert that" doc:id="a163cc6b-44da-44ee-8eac-ae3fb45eae65" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Pending")]' message="Terafina SSN straight flow for ID verification failed"/>
		</munit:validation>
	</munit:test>
	<munit:test name="WhenPepFlagIsSetToYesInFinalSubmission" description="MUnit Test" doc:id="5d56157d-f232-4f65-8d54-a44cdeb4273d" >
		<munit:behavior >
			<flow-ref doc:name="OFAC-Mock" doc:id="d925d8bd-c3b0-4dcb-826d-ce264f50374d" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="a7dd1172-ee02-47f3-8029-7656ccc17348" name="PepMock"/>
			<flow-ref doc:name="IDVResponseForPassWorkFlow" doc:id="f91b0847-bb6f-4a7a-b233-fd2404cc0726" name="IDVResponseForPassWorkFlow"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="d97e9326-a795-4c90-9560-c9dccbba385e" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		<munit:execution >
			<ee:transform doc:name="Transform Message" doc:id="8b7974ba-a610-4cc7-9d0d-d4e3b5bb5c42" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
[
  {
    "Answers": {
      "QuestionSetId": 93978945,
      "Questions": [
        {
          "QuestionId": 322596195,
          "Choices": [
            {
              "Choice": "1586587275"
            }
          ]
        },
        {
          "QuestionId": 322596205,
          "Choices": [
            {
              "Choice": "1586587325"
            }
          ]
        },
        {
          "QuestionId": 322596215,
          "Choices": [
            {
              "Choice": "1586587385"
            }
          ]
        }
      ]
    }
  },
  {
    "PinPointRequest": [
      {
        "handler": "session_info",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "result": "pass",
        "channel": "online",
        "new_account_data": {
          "new_account": true,
          "first_name": "RIMAS",
          "last_name": "BROWN",
          "phone_number": "12077742915",
          "email": "ana@v.com"
        }
      },
      {
        "handler": "pinpoint_eval",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "activity": "new_account",
        "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
        "timestamp": "2019-01-29 07:21:24"
      }
    ],
    "IdVerificationRequest": {
      "Settings": {
        "AccountNumber": "45065",
        "Workflow": "public.testing.redherrings.open",
        "Mode": "testing",
        "Reference": "Reference1",
        "Locale": "en_US",
        "Venue": "online"
      },
      "Person": {
        "Name": {
          "FirstName": "RIMAS",
          "LastName": "BROWN"
        },
        "Addresses": [
          {
            "StreetAddress1": "456 Massachusetts Ave",
            "City": "Arlington",
            "State": "MA",
            "Zip5": "02474-5106",
            "Country": "US",
            "Context": "primary"
          }
        ],
        "SSN": {
          "Number": "454545454",
          "Type": "ssn9"
        },
        "DateOfBirth": {
          "Year": "1987",
          "Month": "1",
          "Day": "1"
        },
        "Phones": [
          {
            "Number": "2077742915",
            "Context": "mobile"
          }
        ]
      }
    },
    "IdAuthenticationResponse": [],
    "RequestUUID": "a040x000002LtbaAAC",
    "CaseId": "",
    "CaseStatus": "",
    "ApplicationId": "APP-M-10332",
    "ApplicantType": "NONNRA",
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "ConversationId": "31000095253376",
      "Venue": "online"
    },
    "Promotions": {
      "Status": "Finished",
      "PromoCode": "CV0DKA0D",
      "OnboardingInvitation": {
        "EmailAddress": "ana@v.com",
        "PhoneNumber": "2077742915"
      }
    },
    "AccountInformation": {
      "AccountType": "CHK_I_PERS_PREMIER",
      "DepositAccount": {
        "WithholdingIndicator": "ExemptConfirmed",
        "UserCode": "D",
        "StatusCodes": [
          "NeverClose"
        ],
        "BulkFileType": "ImageFile"
      },
      "CardAccount": {
        "NameOnCard": "RIMAS  BROWN",
        "CardDesign": "Black"
      },
      "CustomerToAccountRelationship": {
        "Customer1AccountRelationshipCode": "000",
        "Customer1AccountAssociationType": "Primary",
        "Address": {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip": "02474",
          "IsForeignAddress": false
        },
        "NumberOfStatementCopies": 1,
        "AddressLineOfTINOwner": 1
      }
    },
    "CustomerInformation": {
      "DateOfBirth": "1987-01-01",
      "FirstName": "RIMAS",
      "LastName": "BROWN",
      "Gender": null,
      "PrimaryLanguage": "English",
      "VisaType": null,
      "ForeignTaxID": null,
      "PrimaryPurposeofAccOpening": null,
      "SourceofFunds": {
        "Source": null,
        "MiscDemographic": 2,
        "CustomerIntentforIntWireTransfer": {
          "TransferServices": false,
          "ForeignOutActivity": {
            "OutgoingWiresAmount": null,
            "OutgoingWires": null,
            "ForeignOutgoingActivity": false
          },
          "ForeignInActivity": {
            "IncomingWiresAmount": null,
            "IncomingWires": null,
            "ForeignIncomingActivity": false
          }
        }
      },
      "CISNumber": "",
      "PEP": "Yes",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "CountryCode": "USA",
        "IsForeignAddress": false,
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474"
      },
      "CountryCode": "+1",
      "MobilePhoneNumber": "2077742915",
      "TaxNumber": "454545454",
      "TaxIdType": "SocialSecurityNumber",
      "CitizenshipCode": "USA",
      "BranchNumber": "8161",
      "CostCenterNumber": "161",
      "CategoryCode1": "903",
      "Occupation": "AgricultureOrFishing",
      "Identification": {
        "Status": "NonDocVerification",
        "NonDocumentaryIdentificationInformation1": "VLN"
      },
      "EmailAddress": "ana@v.com",
      "RequestUUID": "a040x000002LtbaAAC"
    },
    "Documents": []
  }
]]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="d57b644f-88a5-4dca-a10f-9b1635241eda">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			
			<flow-ref doc:name="post:\process\submit\submission:velo-process-api-config" doc:id="6db89d00-b21e-4bc8-8e29-aedf0fee8fd0" name="post:\process\submit\submission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="04b37499-738a-4038-ad81-124b7a509ee3" message="Payload after test suite run #[payload]" />
			<munit-tools:assert-that doc:name="Assert that" doc:id="ded68c2d-dba9-4129-a199-23c58e50b15b" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Pending")]' message="Terafina SSN Submission flow - Test failed when PEP flag is set to Yes" />
		</munit:validation>
	</munit:test>
	<munit:test name="WhenDocAuthResultIsFailedInFinalSubmission" description="MUnit Test" doc:id="5de2f3cf-d766-4185-8656-634d9797911c" >
		<munit:behavior >
			<flow-ref doc:name="OFAC-Mock" doc:id="4ca780d3-8e9c-454f-81f6-5b379d7df290" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="5066a831-b5d2-41c8-aeb0-b75e2e094f56" name="PepMock"/>
			<flow-ref doc:name="IDVResponseForPassWorkFlow" doc:id="7fd2018f-6cc7-42d7-9e1b-387c15d01e24" name="IDVResponseForPassWorkFlow"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="f2d26895-5c23-4774-86f5-5f9c92d93e46" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		<munit:execution >
			<ee:transform doc:name="Transform Message" doc:id="fff16eb9-1265-4830-85a9-d27abba730ea" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
[
  {
    "Answers": {
      "QuestionSetId": 93978945,
      "Questions": [
        {
          "QuestionId": 322596195,
          "Choices": [
            {
              "Choice": "1586587275"
            }
          ]
        },
        {
          "QuestionId": 322596205,
          "Choices": [
            {
              "Choice": "1586587325"
            }
          ]
        },
        {
          "QuestionId": 322596215,
          "Choices": [
            {
              "Choice": "1586587385"
            }
          ]
        }
      ]
    }
  },
  {
    "PinPointRequest": [
      {
        "handler": "session_info",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "result": "pass",
        "channel": "online",
        "new_account_data": {
          "new_account": true,
          "first_name": "RIMAS",
          "last_name": "BROWN",
          "phone_number": "12077742915",
          "email": "ana@v.com"
        }
      },
      {
        "handler": "pinpoint_eval",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "activity": "new_account",
        "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
        "timestamp": "2019-01-29 07:21:24"
      }
    ],
    "IdVerificationRequest": {
      "Settings": {
        "AccountNumber": "45065",
        "Workflow": "public.testing.redherrings.open",
        "Mode": "testing",
        "Reference": "Reference1",
        "Locale": "en_US",
        "Venue": "online"
      },
      "Person": {
        "Name": {
          "FirstName": "RIMAS",
          "LastName": "BROWN"
        },
        "Addresses": [
          {
            "StreetAddress1": "456 Massachusetts Ave",
            "City": "Arlington",
            "State": "MA",
            "Zip5": "02474-5106",
            "Country": "US",
            "Context": "primary"
          }
        ],
        "SSN": {
          "Number": "454545454",
          "Type": "ssn9"
        },
        "DateOfBirth": {
          "Year": "1987",
          "Month": "1",
          "Day": "1"
        },
        "Phones": [
          {
            "Number": "2077742915",
            "Context": "mobile"
          }
        ]
      }
    },
    "IdAuthenticationResponse": [
    	{
        "Status": {
            "ConversationId": "31000157708855",
            "RequestId": "375476745",
            "TransactionStatus": "passed",
            "Reference": "payload.RequestUUID"
        },
        "Products": [
            {
                "ProductType": "TrueID",
                "ExecutedStepName": "True_ID_Step",
                "ProductConfigurationName": "TrueID_Flow",
                "ProductStatus": "pass"
            }
        ],
        "PassThroughs": [
            {
                "Type": "true.id",
                "Data": "{\"IDAuthResultResponse\":{\"Header\":{\"TransactionId\":\"2075551R49355\"},\"Success\":true,\"AuthenticationResult\":{\"DocumentName\":\"Connecticut (CT) Driver License\",\"DocAuthResult\":\"Failed\",\"DocIssuerCode\":\"CT\",\"DocIssuerName\":\"Connecticut\",\"DocClassCode\":\"DriversLicense\",\"DocClass\":\"DriversLicense\",\"DocClassName\":\"Drivers License\",\"DocIsGeneric\":\"false\",\"DocIssue\":\"2009\",\"DocIssueType\":\"Driver License\",\"DocSize\":\"ID1\",\"ClassificationMode\":\"Automatic\",\"OrientationChanged\":\"false\",\"PresentationChanged\":\"false\",\"FullName\":\"EVAN M MOZINGO\",\"Sex\":\"Male\",\"Age\":\"29\",\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11},\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11},\"Portrait\":\"\",\"Signature\":\"\",\"Alerts\":{\"IDAuthAlertData\":[{\"AlertID\":\"d9fdd5ce-059b-4719-90ff-c0167a57a173\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Stylized DOB Label\"]}},{\"AlertID\":\"73bcad3a-3ed7-4128-bb2d-856e82dbbe67\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Expires Label\"]}},{\"AlertID\":\"a5d5c1e3-fe2a-4d4e-87cb-5fd5fcb3db3f\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Inches\"]}},{\"AlertID\":\"214b827f-2fc2-44de-8331-f62b9509eb14\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Center\"]}},{\"AlertID\":\"81b25073-dc95-4314-bd2e-4f9b6deb04ac\",\"AlertName\":\"1D Control Number Valid\",\"AlertKey\":\"1D Control Number Valid\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checks whether the 1D barcode is indicative of known-fake documents.\"},{\"AlertID\":\"ee0dd230-73f9-45dd-acf6-1975d5eded2a\",\"AlertName\":\"2D Barcode Content\",\"AlertKey\":\"2D Barcode Content\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checked the contents of the two-dimensional barcode on the document.\"},{\"AlertID\":\"51b6ce5a-4be7-4031-88ad-b862c6e5e5bf\",\"AlertName\":\"Control Number Crosscheck\",\"AlertKey\":\"Control Number Crosscheck\",\"AuthenticationResult\":\"Caution\",\"AlertDescription\":\"Compare the machine-readable control number field to the human-readable document number field.\"},{\"AlertID\":\"1038cd34-2345-4020-aa6d-eefe54fa9ac9\",\"AlertName\":\"Document Expired\",\"AlertKey\":\"Document Expired\",\"AuthenticationResult\":\"Attention\",\"AlertDescription\":\"Checked if the document is expired.\"},{\"AlertID\":\"bf5762de-6c2b-476d-9fdd-4951e6249b43\",\"AlertName\":\"2D Barcode Read\",\"AlertKey\":\"2D Barcode Read\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the two-dimensional barcode on the document was read successfully.\"},{\"AlertID\":\"c715b400-6f2b-4d13-b71b-80812982f9de\",\"AlertName\":\"Birth Date Crosscheck\",\"AlertKey\":\"Birth Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable birth date field to the human-readable birth date field.\"},{\"AlertID\":\"85b79418-e002-43af-bfd0-df4dc60bb70c\",\"AlertName\":\"Birth Date Valid\",\"AlertKey\":\"Birth Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the birth date is valid.\"},{\"AlertID\":\"7e903bea-d6d0-4f6f-9a7c-fee41247247c\",\"AlertName\":\"Document Classification\",\"AlertKey\":\"Document Classification\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the type of document is supported and is able to be fully authenticated.\"},{\"AlertID\":\"afcb0232-8679-48ba-8ca3-ab3776f5e180\",\"AlertName\":\"Document Crosscheck Aggregation\",\"AlertKey\":\"Document Crosscheck Aggregation\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compared the machine-readable fields to the human-readable fields.\"},{\"AlertID\":\"aa30b127-5e63-4218-888b-98c3cdbcfc30\",\"AlertName\":\"Document Number Crosscheck\",\"AlertKey\":\"Document Number Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable document number field to the human-readable document number field.\"},{\"AlertID\":\"28ea814c-f898-4862-ab91-562a88a58bcf\",\"AlertName\":\"Expiration Date Crosscheck\",\"AlertKey\":\"Expiration Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable expiration date field to the human-readable expiration date field.\"},{\"AlertID\":\"c3936306-944b-4172-b4a5-4f74debfbf03\",\"AlertName\":\"Expiration Date Valid\",\"AlertKey\":\"Expiration Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the expiration date is valid.\"},{\"AlertID\":\"148f773d-b398-4c7d-a6ff-62a58ceedce8\",\"AlertName\":\"Full Name Crosscheck\",\"AlertKey\":\"Full Name Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable full name field to the human-readable full name field.\"},{\"AlertID\":\"e89b80ea-c1c5-4a8e-b4a5-2b86a51428ca\",\"AlertName\":\"Issue Date Valid\",\"AlertKey\":\"Issue Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the issue date is valid.\"},{\"AlertID\":\"f7e4c942-53e6-4ebb-9fe4-8fa54ff26bd1\",\"AlertName\":\"Layout Valid\",\"AlertKey\":\"Layout Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the layout of the document is correct.\",\"Regions\":{\"Region\":[\"2D Barcode Bottom Left\",\"2D Barcode Top Left\"]}},{\"AlertID\":\"1946201e-0a7f-4a9b-9aea-7ae232968038\",\"AlertName\":\"Sex Crosscheck\",\"AlertKey\":\"Sex Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable sex field to the human-readable sex field.\"},{\"AlertID\":\"0e6ec454-0b38-478e-b31d-1d134aea900b\",\"AlertName\":\"Visible Color Response\",\"AlertKey\":\"Visible Color Response\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the color response of an element on the visible image.\",\"Regions\":{\"Region\":[\"Background Salmon\"]}},{\"AlertID\":\"42a3abaf-d6f5-4915-bbb9-b00a846f6d85\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Boat\"]}}]},\"Fields\":{\"IDAuthFieldData\":[{\"Address\":\"1 MUDRY FARM RD\u2028BRISTOL, CT 02809-2366\"},{\"City\":\"BRISTOL\"},{\"AddressLine1\":\"1 MUDRY FARM RD\"},{\"PostalCode\":\"02809-2366\"},{\"State\":\"CT\"},{\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11}},{\"ControlNumber\":\"demo a11230009\"},{\"DocumentClassName\":\"Drivers License\"},{\"DocumentNumber\":\"096760377\"},{\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11}},{\"FirstName\":\"EVAN\"},{\"FullName\":\"EVAN M MOZINGO\"},{\"GivenName\":\"EVAN M\"},{\"Height\":\"5' 9\\\"\"},{\"IssueDate\":{\"Year\":2010,\"Month\":10,\"Day\":12}},{\"IssuingStateCode\":\"CT\"},{\"IssuingStateName\":\"Connecticut\"},{\"LicenseClass\":\"D\"},{\"MiddleName\":\"M\"},{\"Sex\":\"M\"},{\"Surname\":\"MOZINGO\"}]}}}}"
            }
        ]
    }
    ],
    "RequestUUID": "a040x000002LtbaAAC",
    "CaseId": "",
    "CaseStatus": "",
    "ApplicationId": "APP-M-10332",
    "ApplicantType": "NONNRA",
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "ConversationId": "31000095253376",
      "Venue": "online"
    },
    "Promotions": {
      "Status": "Finished",
      "PromoCode": "CV0DKA0D",
      "OnboardingInvitation": {
        "EmailAddress": "ana@v.com",
        "PhoneNumber": "2077742915"
      }
    },
    "AccountInformation": {
      "AccountType": "CHK_I_PERS_PREMIER",
      "DepositAccount": {
        "WithholdingIndicator": "ExemptConfirmed",
        "UserCode": "D",
        "StatusCodes": [
          "NeverClose"
        ],
        "BulkFileType": "ImageFile"
      },
      "CardAccount": {
        "NameOnCard": "RIMAS  BROWN",
        "CardDesign": "Black"
      },
      "CustomerToAccountRelationship": {
        "Customer1AccountRelationshipCode": "000",
        "Customer1AccountAssociationType": "Primary",
        "Address": {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip": "02474",
          "IsForeignAddress": false
        },
        "NumberOfStatementCopies": 1,
        "AddressLineOfTINOwner": 1
      }
    },
    "CustomerInformation": {
      "DateOfBirth": "1987-01-01",
      "FirstName": "RIMAS",
      "LastName": "BROWN",
      "Gender": null,
      "PrimaryLanguage": "English",
      "VisaType": null,
      "ForeignTaxID": null,
      "PrimaryPurposeofAccOpening": null,
      "SourceofFunds": {
        "Source": null,
        "MiscDemographic": 2,
        "CustomerIntentforIntWireTransfer": {
          "TransferServices": false,
          "ForeignOutActivity": {
            "OutgoingWiresAmount": null,
            "OutgoingWires": null,
            "ForeignOutgoingActivity": false
          },
          "ForeignInActivity": {
            "IncomingWiresAmount": null,
            "IncomingWires": null,
            "ForeignIncomingActivity": false
          }
        }
      },
      "CISNumber": "",
      "PEP": "No",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "CountryCode": "USA",
        "IsForeignAddress": false,
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474"
      },
      "CountryCode": "+1",
      "MobilePhoneNumber": "2077742915",
      "TaxNumber": "454545454",
      "TaxIdType": "SocialSecurityNumber",
      "CitizenshipCode": "USA",
      "BranchNumber": "8161",
      "CostCenterNumber": "161",
      "CategoryCode1": "903",
      "Occupation": "AgricultureOrFishing",
      "Identification": {
        "Status": "NonDocVerification",
        "NonDocumentaryIdentificationInformation1": "VLN"
      },
      "EmailAddress": "ana@v.com",
      "RequestUUID": "a040x000002LtbaAAC"
    },
    "Documents": []
  }
]]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="594f7c93-9efc-4d99-8027-ac3d854ecd4c">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			
			<flow-ref doc:name="post:\process\submit\submission:velo-process-api-config" doc:id="0b31b6ff-eb08-48ed-859b-d9643d8376eb" name="post:\process\submit\submission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="f9c074f2-88bd-4468-83fc-33814cba9ba0" message="Payload after test suite run #[payload]" />
			<munit-tools:assert-that doc:name="Assert that" doc:id="9f2b9181-2035-42d7-a314-2c5070706f7a" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Pending")]' message="Terafina SSN Submission flow - Test failed when PEP flag is set to Yes" />
		</munit:validation>
	</munit:test>
	<munit:test name="WhenIDVTrasactionStatusIsPendingOrFailedFinalSubmission" description="MUnit Test" doc:id="9818b6f1-67e8-412b-8f2f-ca1ece7d6ec6" >
		<munit:behavior >
			<flow-ref doc:name="OFAC-Mock" doc:id="90d09967-848b-44c3-8f29-346eee7a361a" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="02629275-5fae-4eef-9f9e-1237fb0ce5c3" name="PepMock"/>
			<flow-ref doc:name="InstantIdTrasactionStatusAsPendingForPassWorkFlow" doc:id="d89aa6b7-9cc8-4132-915e-32aa1db5cc5c" name="InstantIdTrasactionStatusAsPendingForPassWorkFlow"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="4f01d972-45ec-444b-9d3d-a6ab3135a061" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		<munit:execution >
			<ee:transform doc:name="Transform Message" doc:id="5ee24869-5d0b-4331-a19b-1fe790e4d71d" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
[
  {
    "Answers": {
      "QuestionSetId": 93978945,
      "Questions": [
        {
          "QuestionId": 322596195,
          "Choices": [
            {
              "Choice": "1586587275"
            }
          ]
        },
        {
          "QuestionId": 322596205,
          "Choices": [
            {
              "Choice": "1586587325"
            }
          ]
        },
        {
          "QuestionId": 322596215,
          "Choices": [
            {
              "Choice": "1586587385"
            }
          ]
        }
      ]
    }
  },
  {
    "PinPointRequest": [
      {
        "handler": "session_info",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "result": "pass",
        "channel": "online",
        "new_account_data": {
          "new_account": true,
          "first_name": "RIMAS",
          "last_name": "BROWN",
          "phone_number": "12077742915",
          "email": "ana@v.com"
        }
      },
      {
        "handler": "pinpoint_eval",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "activity": "new_account",
        "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
        "timestamp": "2019-01-29 07:21:24"
      }
    ],
    "IdVerificationRequest": {
      "Settings": {
        "AccountNumber": "45065",
        "Workflow": "public.testing.redherrings.open",
        "Mode": "testing",
        "Reference": "Reference1",
        "Locale": "en_US",
        "Venue": "online"
      },
      "Person": {
        "Name": {
          "FirstName": "RIMAS",
          "LastName": "BROWN"
        },
        "Addresses": [
          {
            "StreetAddress1": "456 Massachusetts Ave",
            "City": "Arlington",
            "State": "MA",
            "Zip5": "02474-5106",
            "Country": "US",
            "Context": "primary"
          }
        ],
        "SSN": {
          "Number": "454545454",
          "Type": "ssn9"
        },
        "DateOfBirth": {
          "Year": "1987",
          "Month": "1",
          "Day": "1"
        },
        "Phones": [
          {
            "Number": "2077742915",
            "Context": "mobile"
          }
        ]
      }
    },
    "IdAuthenticationResponse": [
    	{
        "Status": {
            "ConversationId": "31000157708855",
            "RequestId": "375476745",
            "TransactionStatus": "passed",
            "Reference": "payload.RequestUUID"
        },
        "Products": [
            {
                "ProductType": "TrueID",
                "ExecutedStepName": "True_ID_Step",
                "ProductConfigurationName": "TrueID_Flow",
                "ProductStatus": "pass"
            }
        ],
        "PassThroughs": [
            {
                "Type": "true.id",
                "Data": "{\"IDAuthResultResponse\":{\"Header\":{\"TransactionId\":\"2075551R49355\"},\"Success\":true,\"AuthenticationResult\":{\"DocumentName\":\"Connecticut (CT) Driver License\",\"DocAuthResult\":\"Passed\",\"DocIssuerCode\":\"CT\",\"DocIssuerName\":\"Connecticut\",\"DocClassCode\":\"DriversLicense\",\"DocClass\":\"DriversLicense\",\"DocClassName\":\"Drivers License\",\"DocIsGeneric\":\"false\",\"DocIssue\":\"2009\",\"DocIssueType\":\"Driver License\",\"DocSize\":\"ID1\",\"ClassificationMode\":\"Automatic\",\"OrientationChanged\":\"false\",\"PresentationChanged\":\"false\",\"FullName\":\"EVAN M MOZINGO\",\"Sex\":\"Male\",\"Age\":\"29\",\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11},\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11},\"Portrait\":\"\",\"Signature\":\"\",\"Alerts\":{\"IDAuthAlertData\":[{\"AlertID\":\"d9fdd5ce-059b-4719-90ff-c0167a57a173\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Stylized DOB Label\"]}},{\"AlertID\":\"73bcad3a-3ed7-4128-bb2d-856e82dbbe67\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Expires Label\"]}},{\"AlertID\":\"a5d5c1e3-fe2a-4d4e-87cb-5fd5fcb3db3f\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Inches\"]}},{\"AlertID\":\"214b827f-2fc2-44de-8331-f62b9509eb14\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Center\"]}},{\"AlertID\":\"81b25073-dc95-4314-bd2e-4f9b6deb04ac\",\"AlertName\":\"1D Control Number Valid\",\"AlertKey\":\"1D Control Number Valid\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checks whether the 1D barcode is indicative of known-fake documents.\"},{\"AlertID\":\"ee0dd230-73f9-45dd-acf6-1975d5eded2a\",\"AlertName\":\"2D Barcode Content\",\"AlertKey\":\"2D Barcode Content\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checked the contents of the two-dimensional barcode on the document.\"},{\"AlertID\":\"51b6ce5a-4be7-4031-88ad-b862c6e5e5bf\",\"AlertName\":\"Control Number Crosscheck\",\"AlertKey\":\"Control Number Crosscheck\",\"AuthenticationResult\":\"Caution\",\"AlertDescription\":\"Compare the machine-readable control number field to the human-readable document number field.\"},{\"AlertID\":\"1038cd34-2345-4020-aa6d-eefe54fa9ac9\",\"AlertName\":\"Document Expired\",\"AlertKey\":\"Document Expired\",\"AuthenticationResult\":\"Attention\",\"AlertDescription\":\"Checked if the document is expired.\"},{\"AlertID\":\"bf5762de-6c2b-476d-9fdd-4951e6249b43\",\"AlertName\":\"2D Barcode Read\",\"AlertKey\":\"2D Barcode Read\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the two-dimensional barcode on the document was read successfully.\"},{\"AlertID\":\"c715b400-6f2b-4d13-b71b-80812982f9de\",\"AlertName\":\"Birth Date Crosscheck\",\"AlertKey\":\"Birth Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable birth date field to the human-readable birth date field.\"},{\"AlertID\":\"85b79418-e002-43af-bfd0-df4dc60bb70c\",\"AlertName\":\"Birth Date Valid\",\"AlertKey\":\"Birth Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the birth date is valid.\"},{\"AlertID\":\"7e903bea-d6d0-4f6f-9a7c-fee41247247c\",\"AlertName\":\"Document Classification\",\"AlertKey\":\"Document Classification\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the type of document is supported and is able to be fully authenticated.\"},{\"AlertID\":\"afcb0232-8679-48ba-8ca3-ab3776f5e180\",\"AlertName\":\"Document Crosscheck Aggregation\",\"AlertKey\":\"Document Crosscheck Aggregation\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compared the machine-readable fields to the human-readable fields.\"},{\"AlertID\":\"aa30b127-5e63-4218-888b-98c3cdbcfc30\",\"AlertName\":\"Document Number Crosscheck\",\"AlertKey\":\"Document Number Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable document number field to the human-readable document number field.\"},{\"AlertID\":\"28ea814c-f898-4862-ab91-562a88a58bcf\",\"AlertName\":\"Expiration Date Crosscheck\",\"AlertKey\":\"Expiration Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable expiration date field to the human-readable expiration date field.\"},{\"AlertID\":\"c3936306-944b-4172-b4a5-4f74debfbf03\",\"AlertName\":\"Expiration Date Valid\",\"AlertKey\":\"Expiration Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the expiration date is valid.\"},{\"AlertID\":\"148f773d-b398-4c7d-a6ff-62a58ceedce8\",\"AlertName\":\"Full Name Crosscheck\",\"AlertKey\":\"Full Name Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable full name field to the human-readable full name field.\"},{\"AlertID\":\"e89b80ea-c1c5-4a8e-b4a5-2b86a51428ca\",\"AlertName\":\"Issue Date Valid\",\"AlertKey\":\"Issue Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the issue date is valid.\"},{\"AlertID\":\"f7e4c942-53e6-4ebb-9fe4-8fa54ff26bd1\",\"AlertName\":\"Layout Valid\",\"AlertKey\":\"Layout Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the layout of the document is correct.\",\"Regions\":{\"Region\":[\"2D Barcode Bottom Left\",\"2D Barcode Top Left\"]}},{\"AlertID\":\"1946201e-0a7f-4a9b-9aea-7ae232968038\",\"AlertName\":\"Sex Crosscheck\",\"AlertKey\":\"Sex Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable sex field to the human-readable sex field.\"},{\"AlertID\":\"0e6ec454-0b38-478e-b31d-1d134aea900b\",\"AlertName\":\"Visible Color Response\",\"AlertKey\":\"Visible Color Response\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the color response of an element on the visible image.\",\"Regions\":{\"Region\":[\"Background Salmon\"]}},{\"AlertID\":\"42a3abaf-d6f5-4915-bbb9-b00a846f6d85\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Boat\"]}}]},\"Fields\":{\"IDAuthFieldData\":[{\"Address\":\"1 MUDRY FARM RD\u2028BRISTOL, CT 02809-2366\"},{\"City\":\"BRISTOL\"},{\"AddressLine1\":\"1 MUDRY FARM RD\"},{\"PostalCode\":\"02809-2366\"},{\"State\":\"CT\"},{\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11}},{\"ControlNumber\":\"demo a11230009\"},{\"DocumentClassName\":\"Drivers License\"},{\"DocumentNumber\":\"096760377\"},{\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11}},{\"FirstName\":\"EVAN\"},{\"FullName\":\"EVAN M MOZINGO\"},{\"GivenName\":\"EVAN M\"},{\"Height\":\"5' 9\\\"\"},{\"IssueDate\":{\"Year\":2010,\"Month\":10,\"Day\":12}},{\"IssuingStateCode\":\"CT\"},{\"IssuingStateName\":\"Connecticut\"},{\"LicenseClass\":\"D\"},{\"MiddleName\":\"M\"},{\"Sex\":\"M\"},{\"Surname\":\"MOZINGO\"}]}}}}"
            }
        ]
    }
    ],
    "RequestUUID": "a040x000002LtbaAAC",
    "CaseId": "",
    "CaseStatus": "",
    "ApplicationId": "APP-M-10332",
    "ApplicantType": "NONNRA",
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "ConversationId": "31000095253376",
      "Venue": "online"
    },
    "Promotions": {
      "Status": "Finished",
      "PromoCode": "CV0DKA0D",
      "OnboardingInvitation": {
        "EmailAddress": "ana@v.com",
        "PhoneNumber": "2077742915"
      }
    },
    "AccountInformation": {
      "AccountType": "CHK_I_PERS_PREMIER",
      "DepositAccount": {
        "WithholdingIndicator": "ExemptConfirmed",
        "UserCode": "D",
        "StatusCodes": [
          "NeverClose"
        ],
        "BulkFileType": "ImageFile"
      },
      "CardAccount": {
        "NameOnCard": "RIMAS  BROWN",
        "CardDesign": "Black"
      },
      "CustomerToAccountRelationship": {
        "Customer1AccountRelationshipCode": "000",
        "Customer1AccountAssociationType": "Primary",
        "Address": {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip": "02474",
          "IsForeignAddress": false
        },
        "NumberOfStatementCopies": 1,
        "AddressLineOfTINOwner": 1
      }
    },
    "CustomerInformation": {
      "DateOfBirth": "1987-01-01",
      "FirstName": "RIMAS",
      "LastName": "BROWN",
      "Gender": null,
      "PrimaryLanguage": "English",
      "VisaType": null,
      "ForeignTaxID": null,
      "PrimaryPurposeofAccOpening": null,
      "SourceofFunds": {
        "Source": null,
        "MiscDemographic": 2,
        "CustomerIntentforIntWireTransfer": {
          "TransferServices": false,
          "ForeignOutActivity": {
            "OutgoingWiresAmount": null,
            "OutgoingWires": null,
            "ForeignOutgoingActivity": false
          },
          "ForeignInActivity": {
            "IncomingWiresAmount": null,
            "IncomingWires": null,
            "ForeignIncomingActivity": false
          }
        }
      },
      "CISNumber": "",
      "PEP": "No",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "CountryCode": "USA",
        "IsForeignAddress": false,
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474"
      },
      "CountryCode": "+1",
      "MobilePhoneNumber": "2077742915",
      "TaxNumber": "454545454",
      "TaxIdType": "SocialSecurityNumber",
      "CitizenshipCode": "USA",
      "BranchNumber": "8161",
      "CostCenterNumber": "161",
      "CategoryCode1": "903",
      "Occupation": "AgricultureOrFishing",
      "Identification": {
        "Status": "NonDocVerification",
        "NonDocumentaryIdentificationInformation1": "VLN"
      },
      "EmailAddress": "ana@v.com",
      "RequestUUID": "a040x000002LtbaAAC"
    },
    "Documents": []
  }
]]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="d37948f9-f475-4835-8bc4-eaddc7ab2256">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			
			<flow-ref doc:name="post:\process\submit\submission:velo-process-api-config" doc:id="0d7d18a1-6aef-40e6-b496-8b18273c677e" name="post:\process\submit\submission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="e88bd574-a9ec-4ee7-aea8-108608fbf24d" message="Payload after test suite run #[payload]" />
			<munit-tools:assert-that doc:name="Assert that" doc:id="1664018f-e6ce-4e5f-9aaf-123df6475518" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Pending")]' message="Terafina SSN Submission flow - Test failed when PEP flag is set to Yes" />
		</munit:validation>
	</munit:test>
	<munit:test name="WhenIDVTrasactionStatusIsPassedAndKBAIsPendingFinalSubmission" description="MUnit Test" doc:id="41b521c4-e0eb-464b-a2a2-1a9e53e62bc0" >
		<munit:behavior >
			<flow-ref doc:name="OFAC-Mock" doc:id="6c11870a-3762-4252-b663-b4e851d82a3a" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="486e0d1c-06f3-4821-b928-731e1768d098" name="PepMock"/>
			<flow-ref doc:name="InstantIdTrasactionStatusAsPassedAndKBAAsPendingForPassWorkFlow" doc:id="8ae0b38c-bebc-44f7-9442-d0b47a795c95" name="InstantIdTrasactionStatusAsPassedAndKBAAsPendingForPassWorkFlow"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="36ac67a2-7db4-4162-9573-7e517fe9eab5" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		<munit:execution >
			<ee:transform doc:name="Transform Message" doc:id="149ef0cd-3803-4f93-93dc-f1f9052ce594" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
[
  {
    "Answers": {
      "QuestionSetId": 93978945,
      "Questions": [
        {
          "QuestionId": 322596195,
          "Choices": [
            {
              "Choice": "1586587275"
            }
          ]
        },
        {
          "QuestionId": 322596205,
          "Choices": [
            {
              "Choice": "1586587325"
            }
          ]
        },
        {
          "QuestionId": 322596215,
          "Choices": [
            {
              "Choice": "1586587385"
            }
          ]
        }
      ]
    }
  },
  {
    "PinPointRequest": [
      {
        "handler": "session_info",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "result": "pass",
        "channel": "online",
        "new_account_data": {
          "new_account": true,
          "first_name": "RIMAS",
          "last_name": "BROWN",
          "phone_number": "12077742915",
          "email": "ana@v.com"
        }
      },
      {
        "handler": "pinpoint_eval",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "activity": "new_account",
        "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
        "timestamp": "2019-01-29 07:21:24"
      }
    ],
    "IdVerificationRequest": {
      "Settings": {
        "AccountNumber": "45065",
        "Workflow": "public.testing.redherrings.open",
        "Mode": "testing",
        "Reference": "Reference1",
        "Locale": "en_US",
        "Venue": "online"
      },
      "Person": {
        "Name": {
          "FirstName": "RIMAS",
          "LastName": "BROWN"
        },
        "Addresses": [
          {
            "StreetAddress1": "456 Massachusetts Ave",
            "City": "Arlington",
            "State": "MA",
            "Zip5": "02474-5106",
            "Country": "US",
            "Context": "primary"
          }
        ],
        "SSN": {
          "Number": "454545454",
          "Type": "ssn9"
        },
        "DateOfBirth": {
          "Year": "1987",
          "Month": "1",
          "Day": "1"
        },
        "Phones": [
          {
            "Number": "2077742915",
            "Context": "mobile"
          }
        ]
      }
    },
    "IdAuthenticationResponse": [
    	{
        "Status": {
            "ConversationId": "31000157708855",
            "RequestId": "375476745",
            "TransactionStatus": "passed",
            "Reference": "payload.RequestUUID"
        },
        "Products": [
            {
                "ProductType": "TrueID",
                "ExecutedStepName": "True_ID_Step",
                "ProductConfigurationName": "TrueID_Flow",
                "ProductStatus": "pass"
            }
        ],
        "PassThroughs": [
            {
                "Type": "true.id",
                "Data": "{\"IDAuthResultResponse\":{\"Header\":{\"TransactionId\":\"2075551R49355\"},\"Success\":true,\"AuthenticationResult\":{\"DocumentName\":\"Connecticut (CT) Driver License\",\"DocAuthResult\":\"Passed\",\"DocIssuerCode\":\"CT\",\"DocIssuerName\":\"Connecticut\",\"DocClassCode\":\"DriversLicense\",\"DocClass\":\"DriversLicense\",\"DocClassName\":\"Drivers License\",\"DocIsGeneric\":\"false\",\"DocIssue\":\"2009\",\"DocIssueType\":\"Driver License\",\"DocSize\":\"ID1\",\"ClassificationMode\":\"Automatic\",\"OrientationChanged\":\"false\",\"PresentationChanged\":\"false\",\"FullName\":\"EVAN M MOZINGO\",\"Sex\":\"Male\",\"Age\":\"29\",\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11},\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11},\"Portrait\":\"\",\"Signature\":\"\",\"Alerts\":{\"IDAuthAlertData\":[{\"AlertID\":\"d9fdd5ce-059b-4719-90ff-c0167a57a173\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Stylized DOB Label\"]}},{\"AlertID\":\"73bcad3a-3ed7-4128-bb2d-856e82dbbe67\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Expires Label\"]}},{\"AlertID\":\"a5d5c1e3-fe2a-4d4e-87cb-5fd5fcb3db3f\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Inches\"]}},{\"AlertID\":\"214b827f-2fc2-44de-8331-f62b9509eb14\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Center\"]}},{\"AlertID\":\"81b25073-dc95-4314-bd2e-4f9b6deb04ac\",\"AlertName\":\"1D Control Number Valid\",\"AlertKey\":\"1D Control Number Valid\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checks whether the 1D barcode is indicative of known-fake documents.\"},{\"AlertID\":\"ee0dd230-73f9-45dd-acf6-1975d5eded2a\",\"AlertName\":\"2D Barcode Content\",\"AlertKey\":\"2D Barcode Content\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checked the contents of the two-dimensional barcode on the document.\"},{\"AlertID\":\"51b6ce5a-4be7-4031-88ad-b862c6e5e5bf\",\"AlertName\":\"Control Number Crosscheck\",\"AlertKey\":\"Control Number Crosscheck\",\"AuthenticationResult\":\"Caution\",\"AlertDescription\":\"Compare the machine-readable control number field to the human-readable document number field.\"},{\"AlertID\":\"1038cd34-2345-4020-aa6d-eefe54fa9ac9\",\"AlertName\":\"Document Expired\",\"AlertKey\":\"Document Expired\",\"AuthenticationResult\":\"Attention\",\"AlertDescription\":\"Checked if the document is expired.\"},{\"AlertID\":\"bf5762de-6c2b-476d-9fdd-4951e6249b43\",\"AlertName\":\"2D Barcode Read\",\"AlertKey\":\"2D Barcode Read\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the two-dimensional barcode on the document was read successfully.\"},{\"AlertID\":\"c715b400-6f2b-4d13-b71b-80812982f9de\",\"AlertName\":\"Birth Date Crosscheck\",\"AlertKey\":\"Birth Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable birth date field to the human-readable birth date field.\"},{\"AlertID\":\"85b79418-e002-43af-bfd0-df4dc60bb70c\",\"AlertName\":\"Birth Date Valid\",\"AlertKey\":\"Birth Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the birth date is valid.\"},{\"AlertID\":\"7e903bea-d6d0-4f6f-9a7c-fee41247247c\",\"AlertName\":\"Document Classification\",\"AlertKey\":\"Document Classification\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the type of document is supported and is able to be fully authenticated.\"},{\"AlertID\":\"afcb0232-8679-48ba-8ca3-ab3776f5e180\",\"AlertName\":\"Document Crosscheck Aggregation\",\"AlertKey\":\"Document Crosscheck Aggregation\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compared the machine-readable fields to the human-readable fields.\"},{\"AlertID\":\"aa30b127-5e63-4218-888b-98c3cdbcfc30\",\"AlertName\":\"Document Number Crosscheck\",\"AlertKey\":\"Document Number Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable document number field to the human-readable document number field.\"},{\"AlertID\":\"28ea814c-f898-4862-ab91-562a88a58bcf\",\"AlertName\":\"Expiration Date Crosscheck\",\"AlertKey\":\"Expiration Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable expiration date field to the human-readable expiration date field.\"},{\"AlertID\":\"c3936306-944b-4172-b4a5-4f74debfbf03\",\"AlertName\":\"Expiration Date Valid\",\"AlertKey\":\"Expiration Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the expiration date is valid.\"},{\"AlertID\":\"148f773d-b398-4c7d-a6ff-62a58ceedce8\",\"AlertName\":\"Full Name Crosscheck\",\"AlertKey\":\"Full Name Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable full name field to the human-readable full name field.\"},{\"AlertID\":\"e89b80ea-c1c5-4a8e-b4a5-2b86a51428ca\",\"AlertName\":\"Issue Date Valid\",\"AlertKey\":\"Issue Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the issue date is valid.\"},{\"AlertID\":\"f7e4c942-53e6-4ebb-9fe4-8fa54ff26bd1\",\"AlertName\":\"Layout Valid\",\"AlertKey\":\"Layout Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the layout of the document is correct.\",\"Regions\":{\"Region\":[\"2D Barcode Bottom Left\",\"2D Barcode Top Left\"]}},{\"AlertID\":\"1946201e-0a7f-4a9b-9aea-7ae232968038\",\"AlertName\":\"Sex Crosscheck\",\"AlertKey\":\"Sex Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable sex field to the human-readable sex field.\"},{\"AlertID\":\"0e6ec454-0b38-478e-b31d-1d134aea900b\",\"AlertName\":\"Visible Color Response\",\"AlertKey\":\"Visible Color Response\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the color response of an element on the visible image.\",\"Regions\":{\"Region\":[\"Background Salmon\"]}},{\"AlertID\":\"42a3abaf-d6f5-4915-bbb9-b00a846f6d85\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Boat\"]}}]},\"Fields\":{\"IDAuthFieldData\":[{\"Address\":\"1 MUDRY FARM RD\u2028BRISTOL, CT 02809-2366\"},{\"City\":\"BRISTOL\"},{\"AddressLine1\":\"1 MUDRY FARM RD\"},{\"PostalCode\":\"02809-2366\"},{\"State\":\"CT\"},{\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11}},{\"ControlNumber\":\"demo a11230009\"},{\"DocumentClassName\":\"Drivers License\"},{\"DocumentNumber\":\"096760377\"},{\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11}},{\"FirstName\":\"EVAN\"},{\"FullName\":\"EVAN M MOZINGO\"},{\"GivenName\":\"EVAN M\"},{\"Height\":\"5' 9\\\"\"},{\"IssueDate\":{\"Year\":2010,\"Month\":10,\"Day\":12}},{\"IssuingStateCode\":\"CT\"},{\"IssuingStateName\":\"Connecticut\"},{\"LicenseClass\":\"D\"},{\"MiddleName\":\"M\"},{\"Sex\":\"M\"},{\"Surname\":\"MOZINGO\"}]}}}}"
            }
        ]
    }
    ],
    "RequestUUID": "a040x000002LtbaAAC",
    "CaseId": "",
    "CaseStatus": "",
    "ApplicationId": "APP-M-10332",
    "ApplicantType": "NONNRA",
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "ConversationId": "31000095253376",
      "Venue": "online"
    },
    "Promotions": {
      "Status": "Finished",
      "PromoCode": "CV0DKA0D",
      "OnboardingInvitation": {
        "EmailAddress": "ana@v.com",
        "PhoneNumber": "2077742915"
      }
    },
    "AccountInformation": {
      "AccountType": "CHK_I_PERS_PREMIER",
      "DepositAccount": {
        "WithholdingIndicator": "ExemptConfirmed",
        "UserCode": "D",
        "StatusCodes": [
          "NeverClose"
        ],
        "BulkFileType": "ImageFile"
      },
      "CardAccount": {
        "NameOnCard": "RIMAS  BROWN",
        "CardDesign": "Black"
      },
      "CustomerToAccountRelationship": {
        "Customer1AccountRelationshipCode": "000",
        "Customer1AccountAssociationType": "Primary",
        "Address": {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip": "02474",
          "IsForeignAddress": false
        },
        "NumberOfStatementCopies": 1,
        "AddressLineOfTINOwner": 1
      }
    },
    "CustomerInformation": {
      "DateOfBirth": "1987-01-01",
      "FirstName": "RIMAS",
      "LastName": "BROWN",
      "Gender": null,
      "PrimaryLanguage": "English",
      "VisaType": null,
      "ForeignTaxID": null,
      "PrimaryPurposeofAccOpening": null,
      "SourceofFunds": {
        "Source": null,
        "MiscDemographic": 2,
        "CustomerIntentforIntWireTransfer": {
          "TransferServices": false,
          "ForeignOutActivity": {
            "OutgoingWiresAmount": null,
            "OutgoingWires": null,
            "ForeignOutgoingActivity": false
          },
          "ForeignInActivity": {
            "IncomingWiresAmount": null,
            "IncomingWires": null,
            "ForeignIncomingActivity": false
          }
        }
      },
      "CISNumber": "",
      "PEP": "No",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "CountryCode": "USA",
        "IsForeignAddress": false,
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474"
      },
      "CountryCode": "+1",
      "MobilePhoneNumber": "2077742915",
      "TaxNumber": "454545454",
      "TaxIdType": "SocialSecurityNumber",
      "CitizenshipCode": "USA",
      "BranchNumber": "8161",
      "CostCenterNumber": "161",
      "CategoryCode1": "903",
      "Occupation": "AgricultureOrFishing",
      "Identification": {
        "Status": "NonDocVerification",
        "NonDocumentaryIdentificationInformation1": "VLN"
      },
      "EmailAddress": "ana@v.com",
      "RequestUUID": "a040x000002LtbaAAC"
    },
    "Documents": []
  }
]]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="300a5e86-767f-4230-a492-76512c94c1a1">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			
			<flow-ref doc:name="post:\process\submit\submission:velo-process-api-config" doc:id="da71a091-ed7c-4524-95a5-83bed845fca9" name="post:\process\submit\submission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="84877613-c5f5-4d7e-92f4-ff3e756e62fc" message="Payload after test suite run #[payload]" />
			<munit-tools:assert-that doc:name="Assert that" doc:id="244f85dc-74ed-4892-8cc3-eea7e44e96e7" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Pending")]' message="Terafina SSN Submission flow - Test failed when IDV Trasaction Status is Passed and KBA is Pending" />
		</munit:validation>
	</munit:test>
	<munit:test name="WhenOFACResponseIsMatchFinalSubmission" description="MUnit Test" doc:id="f6b3d4df-7de9-4c8e-819e-0eb73b008a5f" >
		<munit:behavior >
			<flow-ref doc:name="OFAC-MatchResponse-Mock" doc:id="3bf7cc43-b274-4664-addb-13950e662917" name="OFAC-MatchResponse-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="f2587fb9-dea3-40b9-a5cb-9bd5e667b505" name="PepMock"/>
			<flow-ref doc:name="InstantIdTrasactionStatusAsPassedAndKBAAsPASSForPassWorkFlow" doc:id="d525d875-99f4-4d74-bc26-d493b0b545a5" name="InstantIdTrasactionStatusAsPassedAndKBAAsPASSForPassWorkFlow"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="763f783e-d7e8-4222-a1b3-5d83d5b7fd6c" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		<munit:execution >
			<ee:transform doc:name="Transform Message" doc:id="bdff832a-aca2-441f-a0fa-baca86c1890e" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
[
  {
    "Answers": {
      "QuestionSetId": 93978945,
      "Questions": [
        {
          "QuestionId": 322596195,
          "Choices": [
            {
              "Choice": "1586587275"
            }
          ]
        },
        {
          "QuestionId": 322596205,
          "Choices": [
            {
              "Choice": "1586587325"
            }
          ]
        },
        {
          "QuestionId": 322596215,
          "Choices": [
            {
              "Choice": "1586587385"
            }
          ]
        }
      ]
    }
  },
  {
    "PinPointRequest": [
      {
        "handler": "session_info",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "result": "pass",
        "channel": "online",
        "new_account_data": {
          "new_account": true,
          "first_name": "RIMAS",
          "last_name": "BROWN",
          "phone_number": "12077742915",
          "email": "ana@v.com"
        }
      },
      {
        "handler": "pinpoint_eval",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "activity": "new_account",
        "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
        "timestamp": "2019-01-29 07:21:24"
      }
    ],
    "IdVerificationRequest": {
      "Settings": {
        "AccountNumber": "45065",
        "Workflow": "public.testing.redherrings.open",
        "Mode": "testing",
        "Reference": "Reference1",
        "Locale": "en_US",
        "Venue": "online"
      },
      "Person": {
        "Name": {
          "FirstName": "RIMAS",
          "LastName": "BROWN"
        },
        "Addresses": [
          {
            "StreetAddress1": "456 Massachusetts Ave",
            "City": "Arlington",
            "State": "MA",
            "Zip5": "02474-5106",
            "Country": "US",
            "Context": "primary"
          }
        ],
        "SSN": {
          "Number": "454545454",
          "Type": "ssn9"
        },
        "DateOfBirth": {
          "Year": "1987",
          "Month": "1",
          "Day": "1"
        },
        "Phones": [
          {
            "Number": "2077742915",
            "Context": "mobile"
          }
        ]
      }
    },
    "IdAuthenticationResponse": [
    	{
        "Status": {
            "ConversationId": "31000157708855",
            "RequestId": "375476745",
            "TransactionStatus": "passed",
            "Reference": "payload.RequestUUID"
        },
        "Products": [
            {
                "ProductType": "TrueID",
                "ExecutedStepName": "True_ID_Step",
                "ProductConfigurationName": "TrueID_Flow",
                "ProductStatus": "pass"
            }
        ],
        "PassThroughs": [
            {
                "Type": "true.id",
                "Data": "{\"IDAuthResultResponse\":{\"Header\":{\"TransactionId\":\"2075551R49355\"},\"Success\":true,\"AuthenticationResult\":{\"DocumentName\":\"Connecticut (CT) Driver License\",\"DocAuthResult\":\"Passed\",\"DocIssuerCode\":\"CT\",\"DocIssuerName\":\"Connecticut\",\"DocClassCode\":\"DriversLicense\",\"DocClass\":\"DriversLicense\",\"DocClassName\":\"Drivers License\",\"DocIsGeneric\":\"false\",\"DocIssue\":\"2009\",\"DocIssueType\":\"Driver License\",\"DocSize\":\"ID1\",\"ClassificationMode\":\"Automatic\",\"OrientationChanged\":\"false\",\"PresentationChanged\":\"false\",\"FullName\":\"EVAN M MOZINGO\",\"Sex\":\"Male\",\"Age\":\"29\",\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11},\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11},\"Portrait\":\"\",\"Signature\":\"\",\"Alerts\":{\"IDAuthAlertData\":[{\"AlertID\":\"d9fdd5ce-059b-4719-90ff-c0167a57a173\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Stylized DOB Label\"]}},{\"AlertID\":\"73bcad3a-3ed7-4128-bb2d-856e82dbbe67\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Expires Label\"]}},{\"AlertID\":\"a5d5c1e3-fe2a-4d4e-87cb-5fd5fcb3db3f\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Inches\"]}},{\"AlertID\":\"214b827f-2fc2-44de-8331-f62b9509eb14\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Center\"]}},{\"AlertID\":\"81b25073-dc95-4314-bd2e-4f9b6deb04ac\",\"AlertName\":\"1D Control Number Valid\",\"AlertKey\":\"1D Control Number Valid\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checks whether the 1D barcode is indicative of known-fake documents.\"},{\"AlertID\":\"ee0dd230-73f9-45dd-acf6-1975d5eded2a\",\"AlertName\":\"2D Barcode Content\",\"AlertKey\":\"2D Barcode Content\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checked the contents of the two-dimensional barcode on the document.\"},{\"AlertID\":\"51b6ce5a-4be7-4031-88ad-b862c6e5e5bf\",\"AlertName\":\"Control Number Crosscheck\",\"AlertKey\":\"Control Number Crosscheck\",\"AuthenticationResult\":\"Caution\",\"AlertDescription\":\"Compare the machine-readable control number field to the human-readable document number field.\"},{\"AlertID\":\"1038cd34-2345-4020-aa6d-eefe54fa9ac9\",\"AlertName\":\"Document Expired\",\"AlertKey\":\"Document Expired\",\"AuthenticationResult\":\"Attention\",\"AlertDescription\":\"Checked if the document is expired.\"},{\"AlertID\":\"bf5762de-6c2b-476d-9fdd-4951e6249b43\",\"AlertName\":\"2D Barcode Read\",\"AlertKey\":\"2D Barcode Read\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the two-dimensional barcode on the document was read successfully.\"},{\"AlertID\":\"c715b400-6f2b-4d13-b71b-80812982f9de\",\"AlertName\":\"Birth Date Crosscheck\",\"AlertKey\":\"Birth Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable birth date field to the human-readable birth date field.\"},{\"AlertID\":\"85b79418-e002-43af-bfd0-df4dc60bb70c\",\"AlertName\":\"Birth Date Valid\",\"AlertKey\":\"Birth Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the birth date is valid.\"},{\"AlertID\":\"7e903bea-d6d0-4f6f-9a7c-fee41247247c\",\"AlertName\":\"Document Classification\",\"AlertKey\":\"Document Classification\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the type of document is supported and is able to be fully authenticated.\"},{\"AlertID\":\"afcb0232-8679-48ba-8ca3-ab3776f5e180\",\"AlertName\":\"Document Crosscheck Aggregation\",\"AlertKey\":\"Document Crosscheck Aggregation\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compared the machine-readable fields to the human-readable fields.\"},{\"AlertID\":\"aa30b127-5e63-4218-888b-98c3cdbcfc30\",\"AlertName\":\"Document Number Crosscheck\",\"AlertKey\":\"Document Number Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable document number field to the human-readable document number field.\"},{\"AlertID\":\"28ea814c-f898-4862-ab91-562a88a58bcf\",\"AlertName\":\"Expiration Date Crosscheck\",\"AlertKey\":\"Expiration Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable expiration date field to the human-readable expiration date field.\"},{\"AlertID\":\"c3936306-944b-4172-b4a5-4f74debfbf03\",\"AlertName\":\"Expiration Date Valid\",\"AlertKey\":\"Expiration Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the expiration date is valid.\"},{\"AlertID\":\"148f773d-b398-4c7d-a6ff-62a58ceedce8\",\"AlertName\":\"Full Name Crosscheck\",\"AlertKey\":\"Full Name Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable full name field to the human-readable full name field.\"},{\"AlertID\":\"e89b80ea-c1c5-4a8e-b4a5-2b86a51428ca\",\"AlertName\":\"Issue Date Valid\",\"AlertKey\":\"Issue Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the issue date is valid.\"},{\"AlertID\":\"f7e4c942-53e6-4ebb-9fe4-8fa54ff26bd1\",\"AlertName\":\"Layout Valid\",\"AlertKey\":\"Layout Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the layout of the document is correct.\",\"Regions\":{\"Region\":[\"2D Barcode Bottom Left\",\"2D Barcode Top Left\"]}},{\"AlertID\":\"1946201e-0a7f-4a9b-9aea-7ae232968038\",\"AlertName\":\"Sex Crosscheck\",\"AlertKey\":\"Sex Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable sex field to the human-readable sex field.\"},{\"AlertID\":\"0e6ec454-0b38-478e-b31d-1d134aea900b\",\"AlertName\":\"Visible Color Response\",\"AlertKey\":\"Visible Color Response\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the color response of an element on the visible image.\",\"Regions\":{\"Region\":[\"Background Salmon\"]}},{\"AlertID\":\"42a3abaf-d6f5-4915-bbb9-b00a846f6d85\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Boat\"]}}]},\"Fields\":{\"IDAuthFieldData\":[{\"Address\":\"1 MUDRY FARM RD\u2028BRISTOL, CT 02809-2366\"},{\"City\":\"BRISTOL\"},{\"AddressLine1\":\"1 MUDRY FARM RD\"},{\"PostalCode\":\"02809-2366\"},{\"State\":\"CT\"},{\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11}},{\"ControlNumber\":\"demo a11230009\"},{\"DocumentClassName\":\"Drivers License\"},{\"DocumentNumber\":\"096760377\"},{\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11}},{\"FirstName\":\"EVAN\"},{\"FullName\":\"EVAN M MOZINGO\"},{\"GivenName\":\"EVAN M\"},{\"Height\":\"5' 9\\\"\"},{\"IssueDate\":{\"Year\":2010,\"Month\":10,\"Day\":12}},{\"IssuingStateCode\":\"CT\"},{\"IssuingStateName\":\"Connecticut\"},{\"LicenseClass\":\"D\"},{\"MiddleName\":\"M\"},{\"Sex\":\"M\"},{\"Surname\":\"MOZINGO\"}]}}}}"
            }
        ]
    }
    ],
    "RequestUUID": "a040x000002LtbaAAC",
    "CaseId": "",
    "CaseStatus": "",
    "ApplicationId": "APP-M-10332",
    "ApplicantType": "NONNRA",
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "ConversationId": "31000095253376",
      "Venue": "online"
    },
    "Promotions": {
      "Status": "Finished",
      "PromoCode": "CV0DKA0D",
      "OnboardingInvitation": {
        "EmailAddress": "ana@v.com",
        "PhoneNumber": "2077742915"
      }
    },
    "AccountInformation": {
      "AccountType": "CHK_I_PERS_PREMIER",
      "DepositAccount": {
        "WithholdingIndicator": "ExemptConfirmed",
        "UserCode": "D",
        "StatusCodes": [
          "NeverClose"
        ],
        "BulkFileType": "ImageFile"
      },
      "CardAccount": {
        "NameOnCard": "RIMAS  BROWN",
        "CardDesign": "Black"
      },
      "CustomerToAccountRelationship": {
        "Customer1AccountRelationshipCode": "000",
        "Customer1AccountAssociationType": "Primary",
        "Address": {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip": "02474",
          "IsForeignAddress": false
        },
        "NumberOfStatementCopies": 1,
        "AddressLineOfTINOwner": 1
      }
    },
    "CustomerInformation": {
      "DateOfBirth": "1987-01-01",
      "FirstName": "RIMAS",
      "LastName": "BROWN",
      "Gender": null,
      "PrimaryLanguage": "English",
      "VisaType": null,
      "ForeignTaxID": null,
      "PrimaryPurposeofAccOpening": null,
      "SourceofFunds": {
        "Source": null,
        "MiscDemographic": 2,
        "CustomerIntentforIntWireTransfer": {
          "TransferServices": false,
          "ForeignOutActivity": {
            "OutgoingWiresAmount": null,
            "OutgoingWires": null,
            "ForeignOutgoingActivity": false
          },
          "ForeignInActivity": {
            "IncomingWiresAmount": null,
            "IncomingWires": null,
            "ForeignIncomingActivity": false
          }
        }
      },
      "CISNumber": "",
      "PEP": "No",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "CountryCode": "USA",
        "IsForeignAddress": false,
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474"
      },
      "CountryCode": "+1",
      "MobilePhoneNumber": "2077742915",
      "TaxNumber": "454545454",
      "TaxIdType": "SocialSecurityNumber",
      "CitizenshipCode": "USA",
      "BranchNumber": "8161",
      "CostCenterNumber": "161",
      "CategoryCode1": "903",
      "Occupation": "AgricultureOrFishing",
      "Identification": {
        "Status": "NonDocVerification",
        "NonDocumentaryIdentificationInformation1": "VLN"
      },
      "EmailAddress": "ana@v.com",
      "RequestUUID": "a040x000002LtbaAAC"
    },
    "Documents": []
  }
]]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="9efc9ee3-9316-4475-97ee-5075283a87bc">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			
			<flow-ref doc:name="post:\process\submit\submission:velo-process-api-config" doc:id="34f6eecb-2772-4bb0-af55-b94d1a92d4aa" name="post:\process\submit\submission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="009d93b5-e907-4fdf-ac3f-68564e5583e8" message="Payload after test suite run #[payload]" />
			<munit-tools:assert-that doc:name="Assert that" doc:id="1ba4f0ee-ec07-4547-95ea-6c450d6fbbdb" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Pending")]' message="Terafina SSN Submission flow - Test failed when IDV Trasaction Status is Passed and KBA is Pending" />
		</munit:validation>
	</munit:test>
	<munit:test name="FinalSubmissionSuccessScenario" description="MUnit Test" doc:id="6590315f-0851-4601-8bb3-baaf22cae145" ignore="true">
		<munit:behavior >
			<flow-ref doc:name="OFAC-Mock" doc:id="269dddb7-be72-48fa-a218-9b113870362e" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="6e84b3c7-5a3c-4e7b-bc56-d6448f5540cc" name="PepMock"/>
			<flow-ref doc:name="InstantIdTrasactionStatusAsPassedAndKBAAsPASSForPassWorkFlow" doc:id="e9b6f8ba-f1ee-40af-af81-e23d28567b99" name="InstantIdTrasactionStatusAsPassedAndKBAAsPASSForPassWorkFlow"/>
			<flow-ref doc:name="PromoUpdateCaseApprovedMockSub_Flow" doc:id="25e72603-54e0-4473-9a4f-a30748d77d48" name="PromoUpdateCaseApprovedMockSub_Flow"/>
			<flow-ref doc:name="FISCheckingAccountTerafinaFlowMock" doc:id="4a1fe669-5138-48eb-9f94-38e468f552f1" name="FISCheckingAccountTerafinaFlowMock"/>
			<flow-ref doc:name="OktaUpdateUserProfileMockSub_Flow" doc:id="4df21b20-22b1-4b35-93f9-90a0d6a2f6dc" name="OktaUpdateUserProfileMockSub_Flow"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="a3f075d6-51fd-4358-b98d-0e7d1b3b0169" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		<munit:execution >
			<ee:transform doc:name="Transform Message" doc:id="5e0bfb9d-d396-4127-bc4b-d945bb7a3709" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
[
  {
    "Answers": {
      "QuestionSetId": 93978945,
      "Questions": [
        {
          "QuestionId": 322596195,
          "Choices": [
            {
              "Choice": "1586587275"
            }
          ]
        },
        {
          "QuestionId": 322596205,
          "Choices": [
            {
              "Choice": "1586587325"
            }
          ]
        },
        {
          "QuestionId": 322596215,
          "Choices": [
            {
              "Choice": "1586587385"
            }
          ]
        }
      ]
    }
  },
  {
    "PinPointRequest": [
      {
        "handler": "session_info",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "result": "pass",
        "channel": "online",
        "new_account_data": {
          "new_account": true,
          "first_name": "RIMAS",
          "last_name": "BROWN",
          "phone_number": "12077742915",
          "email": "ana@v.com"
        }
      },
      {
        "handler": "pinpoint_eval",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "activity": "new_account",
        "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
        "timestamp": "2019-01-29 07:21:24"
      }
    ],
    "IdVerificationRequest": {
      "Settings": {
        "AccountNumber": "45065",
        "Workflow": "public.testing.redherrings.open",
        "Mode": "testing",
        "Reference": "Reference1",
        "Locale": "en_US",
        "Venue": "online"
      },
      "Person": {
        "Name": {
          "FirstName": "RIMAS",
          "LastName": "BROWN"
        },
        "Addresses": [
          {
            "StreetAddress1": "456 Massachusetts Ave",
            "City": "Arlington",
            "State": "MA",
            "Zip5": "02474-5106",
            "Country": "US",
            "Context": "primary"
          }
        ],
        "SSN": {
          "Number": "454545454",
          "Type": "ssn9"
        },
        "DateOfBirth": {
          "Year": "1987",
          "Month": "1",
          "Day": "1"
        },
        "Phones": [
          {
            "Number": "2077742915",
            "Context": "mobile"
          }
        ]
      }
    },
    "IdAuthenticationResponse": [
    	{
        "Status": {
            "ConversationId": "31000157708855",
            "RequestId": "375476745",
            "TransactionStatus": "passed",
            "Reference": "payload.RequestUUID"
        },
        "Products": [
            {
                "ProductType": "TrueID",
                "ExecutedStepName": "True_ID_Step",
                "ProductConfigurationName": "TrueID_Flow",
                "ProductStatus": "pass"
            }
        ],
        "PassThroughs": [
            {
                "Type": "true.id",
                "Data": "{\"IDAuthResultResponse\":{\"Header\":{\"TransactionId\":\"2075551R49355\"},\"Success\":true,\"AuthenticationResult\":{\"DocumentName\":\"Connecticut (CT) Driver License\",\"DocAuthResult\":\"Passed\",\"DocIssuerCode\":\"CT\",\"DocIssuerName\":\"Connecticut\",\"DocClassCode\":\"DriversLicense\",\"DocClass\":\"DriversLicense\",\"DocClassName\":\"Drivers License\",\"DocIsGeneric\":\"false\",\"DocIssue\":\"2009\",\"DocIssueType\":\"Driver License\",\"DocSize\":\"ID1\",\"ClassificationMode\":\"Automatic\",\"OrientationChanged\":\"false\",\"PresentationChanged\":\"false\",\"FullName\":\"EVAN M MOZINGO\",\"Sex\":\"Male\",\"Age\":\"29\",\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11},\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11},\"Portrait\":\"\",\"Signature\":\"\",\"Alerts\":{\"IDAuthAlertData\":[{\"AlertID\":\"d9fdd5ce-059b-4719-90ff-c0167a57a173\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Stylized DOB Label\"]}},{\"AlertID\":\"73bcad3a-3ed7-4128-bb2d-856e82dbbe67\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Expires Label\"]}},{\"AlertID\":\"a5d5c1e3-fe2a-4d4e-87cb-5fd5fcb3db3f\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Inches\"]}},{\"AlertID\":\"214b827f-2fc2-44de-8331-f62b9509eb14\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Center\"]}},{\"AlertID\":\"81b25073-dc95-4314-bd2e-4f9b6deb04ac\",\"AlertName\":\"1D Control Number Valid\",\"AlertKey\":\"1D Control Number Valid\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checks whether the 1D barcode is indicative of known-fake documents.\"},{\"AlertID\":\"ee0dd230-73f9-45dd-acf6-1975d5eded2a\",\"AlertName\":\"2D Barcode Content\",\"AlertKey\":\"2D Barcode Content\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checked the contents of the two-dimensional barcode on the document.\"},{\"AlertID\":\"51b6ce5a-4be7-4031-88ad-b862c6e5e5bf\",\"AlertName\":\"Control Number Crosscheck\",\"AlertKey\":\"Control Number Crosscheck\",\"AuthenticationResult\":\"Caution\",\"AlertDescription\":\"Compare the machine-readable control number field to the human-readable document number field.\"},{\"AlertID\":\"1038cd34-2345-4020-aa6d-eefe54fa9ac9\",\"AlertName\":\"Document Expired\",\"AlertKey\":\"Document Expired\",\"AuthenticationResult\":\"Attention\",\"AlertDescription\":\"Checked if the document is expired.\"},{\"AlertID\":\"bf5762de-6c2b-476d-9fdd-4951e6249b43\",\"AlertName\":\"2D Barcode Read\",\"AlertKey\":\"2D Barcode Read\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the two-dimensional barcode on the document was read successfully.\"},{\"AlertID\":\"c715b400-6f2b-4d13-b71b-80812982f9de\",\"AlertName\":\"Birth Date Crosscheck\",\"AlertKey\":\"Birth Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable birth date field to the human-readable birth date field.\"},{\"AlertID\":\"85b79418-e002-43af-bfd0-df4dc60bb70c\",\"AlertName\":\"Birth Date Valid\",\"AlertKey\":\"Birth Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the birth date is valid.\"},{\"AlertID\":\"7e903bea-d6d0-4f6f-9a7c-fee41247247c\",\"AlertName\":\"Document Classification\",\"AlertKey\":\"Document Classification\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the type of document is supported and is able to be fully authenticated.\"},{\"AlertID\":\"afcb0232-8679-48ba-8ca3-ab3776f5e180\",\"AlertName\":\"Document Crosscheck Aggregation\",\"AlertKey\":\"Document Crosscheck Aggregation\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compared the machine-readable fields to the human-readable fields.\"},{\"AlertID\":\"aa30b127-5e63-4218-888b-98c3cdbcfc30\",\"AlertName\":\"Document Number Crosscheck\",\"AlertKey\":\"Document Number Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable document number field to the human-readable document number field.\"},{\"AlertID\":\"28ea814c-f898-4862-ab91-562a88a58bcf\",\"AlertName\":\"Expiration Date Crosscheck\",\"AlertKey\":\"Expiration Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable expiration date field to the human-readable expiration date field.\"},{\"AlertID\":\"c3936306-944b-4172-b4a5-4f74debfbf03\",\"AlertName\":\"Expiration Date Valid\",\"AlertKey\":\"Expiration Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the expiration date is valid.\"},{\"AlertID\":\"148f773d-b398-4c7d-a6ff-62a58ceedce8\",\"AlertName\":\"Full Name Crosscheck\",\"AlertKey\":\"Full Name Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable full name field to the human-readable full name field.\"},{\"AlertID\":\"e89b80ea-c1c5-4a8e-b4a5-2b86a51428ca\",\"AlertName\":\"Issue Date Valid\",\"AlertKey\":\"Issue Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the issue date is valid.\"},{\"AlertID\":\"f7e4c942-53e6-4ebb-9fe4-8fa54ff26bd1\",\"AlertName\":\"Layout Valid\",\"AlertKey\":\"Layout Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the layout of the document is correct.\",\"Regions\":{\"Region\":[\"2D Barcode Bottom Left\",\"2D Barcode Top Left\"]}},{\"AlertID\":\"1946201e-0a7f-4a9b-9aea-7ae232968038\",\"AlertName\":\"Sex Crosscheck\",\"AlertKey\":\"Sex Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable sex field to the human-readable sex field.\"},{\"AlertID\":\"0e6ec454-0b38-478e-b31d-1d134aea900b\",\"AlertName\":\"Visible Color Response\",\"AlertKey\":\"Visible Color Response\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the color response of an element on the visible image.\",\"Regions\":{\"Region\":[\"Background Salmon\"]}},{\"AlertID\":\"42a3abaf-d6f5-4915-bbb9-b00a846f6d85\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Boat\"]}}]},\"Fields\":{\"IDAuthFieldData\":[{\"Address\":\"1 MUDRY FARM RD\u2028BRISTOL, CT 02809-2366\"},{\"City\":\"BRISTOL\"},{\"AddressLine1\":\"1 MUDRY FARM RD\"},{\"PostalCode\":\"02809-2366\"},{\"State\":\"CT\"},{\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11}},{\"ControlNumber\":\"demo a11230009\"},{\"DocumentClassName\":\"Drivers License\"},{\"DocumentNumber\":\"096760377\"},{\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11}},{\"FirstName\":\"EVAN\"},{\"FullName\":\"EVAN M MOZINGO\"},{\"GivenName\":\"EVAN M\"},{\"Height\":\"5' 9\\\"\"},{\"IssueDate\":{\"Year\":2010,\"Month\":10,\"Day\":12}},{\"IssuingStateCode\":\"CT\"},{\"IssuingStateName\":\"Connecticut\"},{\"LicenseClass\":\"D\"},{\"MiddleName\":\"M\"},{\"Sex\":\"M\"},{\"Surname\":\"MOZINGO\"}]}}}}"
            }
        ]
    }
    ],
    "RequestUUID": "a040x000002LtbaAAC",
    "CaseId": "",
    "CaseStatus": "",
    "ApplicationId": "APP-M-10332",
    "ApplicantType": "NONNRA",
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "ConversationId": "31000095253376",
      "Venue": "online"
    },
    "Promotions": {
      "Status": "Finished",
      "PromoCode": "CV0DKA0D",
      "OnboardingInvitation": {
        "EmailAddress": "ana@v.com",
        "PhoneNumber": "2077742915"
      }
    },
    "AccountInformation": {
      "AccountType": "CHK_I_PERS_PREMIER",
      "DepositAccount": {
        "WithholdingIndicator": "ExemptConfirmed",
        "UserCode": "D",
        "StatusCodes": [
          "NeverClose"
        ],
        "BulkFileType": "ImageFile"
      },
      "CardAccount": {
        "NameOnCard": "RIMAS  BROWN",
        "CardDesign": "Black"
      },
      "CustomerToAccountRelationship": {
        "Customer1AccountRelationshipCode": "000",
        "Customer1AccountAssociationType": "Primary",
        "Address": {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip": "02474",
          "IsForeignAddress": false
        },
        "NumberOfStatementCopies": 1,
        "AddressLineOfTINOwner": 1
      }
    },
    "CustomerInformation": {
      "DateOfBirth": "1987-01-01",
      "FirstName": "RIMAS",
      "LastName": "BROWN",
      "Gender": null,
      "PrimaryLanguage": "English",
      "VisaType": null,
      "ForeignTaxID": null,
      "PrimaryPurposeofAccOpening": null,
      "SourceofFunds": {
        "Source": null,
        "MiscDemographic": 2,
        "CustomerIntentforIntWireTransfer": {
          "TransferServices": false,
          "ForeignOutActivity": {
            "OutgoingWiresAmount": null,
            "OutgoingWires": null,
            "ForeignOutgoingActivity": false
          },
          "ForeignInActivity": {
            "IncomingWiresAmount": null,
            "IncomingWires": null,
            "ForeignIncomingActivity": false
          }
        }
      },
      "CISNumber": "",
      "PEP": "No",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "CountryCode": "USA",
        "IsForeignAddress": false,
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474"
      },
      "CountryCode": "+1",
      "MobilePhoneNumber": "2077742915",
      "TaxNumber": "454545454",
      "TaxIdType": "SocialSecurityNumber",
      "CitizenshipCode": "USA",
      "BranchNumber": "8161",
      "CostCenterNumber": "161",
      "CategoryCode1": "903",
      "Occupation": "AgricultureOrFishing",
      "Identification": {
        "Status": "NonDocVerification",
        "NonDocumentaryIdentificationInformation1": "VLN"
      },
      "EmailAddress": "ana@v.com",
      "RequestUUID": "a040x000002LtbaAAC"
    },
    "Documents": []
  }
]]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="3b74b817-db34-4727-8258-3bbc4259ab66">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			
			<flow-ref doc:name="post:\process\submit\submission:velo-process-api-config" doc:id="977268c1-4aa9-4ede-9eeb-e1eea13050a0" name="post:\process\submit\submission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="3de84c65-338f-46fb-8331-3a48e9e2ada3" message="Payload after test suite run #[payload]" />
			<munit-tools:assert-that doc:name="Assert that" doc:id="74e803a2-10db-481e-a5f8-c85ebc08b03a" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Approved")]' message="Terafina SSN Submission flow - Test failed for FinalSubmissionSuccessScenario" />
			<munit-tools:assert-that doc:name="Assert that okta Id is present" doc:id="a428cac2-17ef-45ec-91cb-21b2a0f330ff" expression="#[payload.data.OktaId]" is='#[MunitTools::notNullValue()]' message="Partner okta id test case failed for success scenario" />
		</munit:validation>
	</munit:test>
	<munit:test name="PointingToDefaultFlowInFinalSubmissionFlow" description="MUnit Test" doc:id="42bea5d4-97da-42b1-8b28-f27e451f8a1e" >
		<munit:behavior >
			<flow-ref doc:name="OFAC-Mock" doc:id="0e5cf06f-f8b3-4f26-99a2-09f2357e2f8a" name="OFAC-Mock"/>
			<flow-ref doc:name="PepMock" doc:id="43df5c97-0e46-4acf-ae6a-5439598b47f7" name="PepMock"/>
			<flow-ref doc:name="InstantIdUnKnownResponseForPassWorkFlow" doc:id="0bc40d75-999f-4a25-834d-8f4373b3196d" name="InstantIdUnKnownResponseForPassWorkFlow"/>
			<flow-ref doc:name="MSDCaseCreationResponseMock" doc:id="b9490b75-b5f4-4077-9fee-d7bcb99b37d4" name="MSDCaseCreationResponseMock"/>
		</munit:behavior>
		<munit:execution >
			<ee:transform doc:name="Transform Message" doc:id="c3b8e046-0394-4204-a4e8-ae3fc9e5d4a5" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
[
  {
    "Answers": {
      "QuestionSetId": 93978945,
      "Questions": [
        {
          "QuestionId": 322596195,
          "Choices": [
            {
              "Choice": "1586587275"
            }
          ]
        },
        {
          "QuestionId": 322596205,
          "Choices": [
            {
              "Choice": "1586587325"
            }
          ]
        },
        {
          "QuestionId": 322596215,
          "Choices": [
            {
              "Choice": "1586587385"
            }
          ]
        }
      ]
    }
  },
  {
    "PinPointRequest": [
      {
        "handler": "session_info",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "result": "pass",
        "channel": "online",
        "new_account_data": {
          "new_account": true,
          "first_name": "RIMAS",
          "last_name": "BROWN",
          "phone_number": "12077742915",
          "email": "ana@v.com"
        }
      },
      {
        "handler": "pinpoint_eval",
        "customer_session_id": "EnP1kt94bst5f8mZbCqH57LBx",
        "remote_addr": "59.165.215.253",
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36",
        "activity": "new_account",
        "url": "https://int-eastwestbank.cs95.force.com/tf4sf__dsp#/get-started",
        "timestamp": "2019-01-29 07:21:24"
      }
    ],
    "IdVerificationRequest": {
      "Settings": {
        "AccountNumber": "45065",
        "Workflow": "public.testing.redherrings.open",
        "Mode": "testing",
        "Reference": "Reference1",
        "Locale": "en_US",
        "Venue": "online"
      },
      "Person": {
        "Name": {
          "FirstName": "RIMAS",
          "LastName": "BROWN"
        },
        "Addresses": [
          {
            "StreetAddress1": "456 Massachusetts Ave",
            "City": "Arlington",
            "State": "MA",
            "Zip5": "02474-5106",
            "Country": "US",
            "Context": "primary"
          }
        ],
        "SSN": {
          "Number": "454545454",
          "Type": "ssn9"
        },
        "DateOfBirth": {
          "Year": "1987",
          "Month": "1",
          "Day": "1"
        },
        "Phones": [
          {
            "Number": "2077742915",
            "Context": "mobile"
          }
        ]
      }
    },
    "IdAuthenticationResponse": [
    	{
        "Status": {
            "ConversationId": "31000157708855",
            "RequestId": "375476745",
            "TransactionStatus": "passed",
            "Reference": "payload.RequestUUID"
        },
        "Products": [
            {
                "ProductType": "TrueID",
                "ExecutedStepName": "True_ID_Step",
                "ProductConfigurationName": "TrueID_Flow",
                "ProductStatus": "pass"
            }
        ],
        "PassThroughs": [
            {
                "Type": "true.id",
                "Data": "{\"IDAuthResultResponse\":{\"Header\":{\"TransactionId\":\"2075551R49355\"},\"Success\":true,\"AuthenticationResult\":{\"DocumentName\":\"Connecticut (CT) Driver License\",\"DocAuthResult\":\"Passed\",\"DocIssuerCode\":\"CT\",\"DocIssuerName\":\"Connecticut\",\"DocClassCode\":\"DriversLicense\",\"DocClass\":\"DriversLicense\",\"DocClassName\":\"Drivers License\",\"DocIsGeneric\":\"false\",\"DocIssue\":\"2009\",\"DocIssueType\":\"Driver License\",\"DocSize\":\"ID1\",\"ClassificationMode\":\"Automatic\",\"OrientationChanged\":\"false\",\"PresentationChanged\":\"false\",\"FullName\":\"EVAN M MOZINGO\",\"Sex\":\"Male\",\"Age\":\"29\",\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11},\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11},\"Portrait\":\"\",\"Signature\":\"\",\"Alerts\":{\"IDAuthAlertData\":[{\"AlertID\":\"d9fdd5ce-059b-4719-90ff-c0167a57a173\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Stylized DOB Label\"]}},{\"AlertID\":\"73bcad3a-3ed7-4128-bb2d-856e82dbbe67\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Expires Label\"]}},{\"AlertID\":\"a5d5c1e3-fe2a-4d4e-87cb-5fd5fcb3db3f\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Inches\"]}},{\"AlertID\":\"214b827f-2fc2-44de-8331-f62b9509eb14\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Center\"]}},{\"AlertID\":\"81b25073-dc95-4314-bd2e-4f9b6deb04ac\",\"AlertName\":\"1D Control Number Valid\",\"AlertKey\":\"1D Control Number Valid\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checks whether the 1D barcode is indicative of known-fake documents.\"},{\"AlertID\":\"ee0dd230-73f9-45dd-acf6-1975d5eded2a\",\"AlertName\":\"2D Barcode Content\",\"AlertKey\":\"2D Barcode Content\",\"AuthenticationResult\":\"Failed\",\"AlertDescription\":\"Checked the contents of the two-dimensional barcode on the document.\"},{\"AlertID\":\"51b6ce5a-4be7-4031-88ad-b862c6e5e5bf\",\"AlertName\":\"Control Number Crosscheck\",\"AlertKey\":\"Control Number Crosscheck\",\"AuthenticationResult\":\"Caution\",\"AlertDescription\":\"Compare the machine-readable control number field to the human-readable document number field.\"},{\"AlertID\":\"1038cd34-2345-4020-aa6d-eefe54fa9ac9\",\"AlertName\":\"Document Expired\",\"AlertKey\":\"Document Expired\",\"AuthenticationResult\":\"Attention\",\"AlertDescription\":\"Checked if the document is expired.\"},{\"AlertID\":\"bf5762de-6c2b-476d-9fdd-4951e6249b43\",\"AlertName\":\"2D Barcode Read\",\"AlertKey\":\"2D Barcode Read\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the two-dimensional barcode on the document was read successfully.\"},{\"AlertID\":\"c715b400-6f2b-4d13-b71b-80812982f9de\",\"AlertName\":\"Birth Date Crosscheck\",\"AlertKey\":\"Birth Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable birth date field to the human-readable birth date field.\"},{\"AlertID\":\"85b79418-e002-43af-bfd0-df4dc60bb70c\",\"AlertName\":\"Birth Date Valid\",\"AlertKey\":\"Birth Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the birth date is valid.\"},{\"AlertID\":\"7e903bea-d6d0-4f6f-9a7c-fee41247247c\",\"AlertName\":\"Document Classification\",\"AlertKey\":\"Document Classification\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the type of document is supported and is able to be fully authenticated.\"},{\"AlertID\":\"afcb0232-8679-48ba-8ca3-ab3776f5e180\",\"AlertName\":\"Document Crosscheck Aggregation\",\"AlertKey\":\"Document Crosscheck Aggregation\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compared the machine-readable fields to the human-readable fields.\"},{\"AlertID\":\"aa30b127-5e63-4218-888b-98c3cdbcfc30\",\"AlertName\":\"Document Number Crosscheck\",\"AlertKey\":\"Document Number Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable document number field to the human-readable document number field.\"},{\"AlertID\":\"28ea814c-f898-4862-ab91-562a88a58bcf\",\"AlertName\":\"Expiration Date Crosscheck\",\"AlertKey\":\"Expiration Date Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable expiration date field to the human-readable expiration date field.\"},{\"AlertID\":\"c3936306-944b-4172-b4a5-4f74debfbf03\",\"AlertName\":\"Expiration Date Valid\",\"AlertKey\":\"Expiration Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the expiration date is valid.\"},{\"AlertID\":\"148f773d-b398-4c7d-a6ff-62a58ceedce8\",\"AlertName\":\"Full Name Crosscheck\",\"AlertKey\":\"Full Name Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable full name field to the human-readable full name field.\"},{\"AlertID\":\"e89b80ea-c1c5-4a8e-b4a5-2b86a51428ca\",\"AlertName\":\"Issue Date Valid\",\"AlertKey\":\"Issue Date Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the issue date is valid.\"},{\"AlertID\":\"f7e4c942-53e6-4ebb-9fe4-8fa54ff26bd1\",\"AlertName\":\"Layout Valid\",\"AlertKey\":\"Layout Valid\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified that the layout of the document is correct.\",\"Regions\":{\"Region\":[\"2D Barcode Bottom Left\",\"2D Barcode Top Left\"]}},{\"AlertID\":\"1946201e-0a7f-4a9b-9aea-7ae232968038\",\"AlertName\":\"Sex Crosscheck\",\"AlertKey\":\"Sex Crosscheck\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Compare the machine-readable sex field to the human-readable sex field.\"},{\"AlertID\":\"0e6ec454-0b38-478e-b31d-1d134aea900b\",\"AlertName\":\"Visible Color Response\",\"AlertKey\":\"Visible Color Response\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the color response of an element on the visible image.\",\"Regions\":{\"Region\":[\"Background Salmon\"]}},{\"AlertID\":\"42a3abaf-d6f5-4915-bbb9-b00a846f6d85\",\"AlertName\":\"Visible Pattern\",\"AlertKey\":\"Visible Pattern\",\"AuthenticationResult\":\"Passed\",\"AlertDescription\":\"Verified the presence of a pattern on the visible image.\",\"Regions\":{\"Region\":[\"Background Boat\"]}}]},\"Fields\":{\"IDAuthFieldData\":[{\"Address\":\"1 MUDRY FARM RD\u2028BRISTOL, CT 02809-2366\"},{\"City\":\"BRISTOL\"},{\"AddressLine1\":\"1 MUDRY FARM RD\"},{\"PostalCode\":\"02809-2366\"},{\"State\":\"CT\"},{\"DOB\":{\"Year\":1989,\"Month\":9,\"Day\":11}},{\"ControlNumber\":\"demo a11230009\"},{\"DocumentClassName\":\"Drivers License\"},{\"DocumentNumber\":\"096760377\"},{\"ExpirationDate\":{\"Year\":2017,\"Month\":9,\"Day\":11}},{\"FirstName\":\"EVAN\"},{\"FullName\":\"EVAN M MOZINGO\"},{\"GivenName\":\"EVAN M\"},{\"Height\":\"5' 9\\\"\"},{\"IssueDate\":{\"Year\":2010,\"Month\":10,\"Day\":12}},{\"IssuingStateCode\":\"CT\"},{\"IssuingStateName\":\"Connecticut\"},{\"LicenseClass\":\"D\"},{\"MiddleName\":\"M\"},{\"Sex\":\"M\"},{\"Surname\":\"MOZINGO\"}]}}}}"
            }
        ]
    }
    ],
    "RequestUUID": "a040x000002LtbaAAC",
    "CaseId": "",
    "CaseStatus": "",
    "ApplicationId": "APP-M-10332",
    "ApplicantType": "NONNRA",
    "Settings": {
      "AccountNumber": "45065",
      "Workflow": "public.testing.redherrings.open",
      "Mode": "testing",
      "Reference": "Reference1",
      "Locale": "en_US",
      "ConversationId": "31000095253376",
      "Venue": "online"
    },
    "Promotions": {
      "Status": "Finished",
      "PromoCode": "CV0DKA0D",
      "OnboardingInvitation": {
        "EmailAddress": "ana@v.com",
        "PhoneNumber": "2077742915"
      }
    },
    "AccountInformation": {
      "AccountType": "CHK_I_PERS_PREMIER",
      "DepositAccount": {
        "WithholdingIndicator": "ExemptConfirmed",
        "UserCode": "D",
        "StatusCodes": [
          "NeverClose"
        ],
        "BulkFileType": "ImageFile"
      },
      "CardAccount": {
        "NameOnCard": "RIMAS  BROWN",
        "CardDesign": "Black"
      },
      "CustomerToAccountRelationship": {
        "Customer1AccountRelationshipCode": "000",
        "Customer1AccountAssociationType": "Primary",
        "Address": {
          "StreetAddress1": "456 Massachusetts Ave",
          "City": "Arlington",
          "State": "MA",
          "Zip": "02474",
          "IsForeignAddress": false
        },
        "NumberOfStatementCopies": 1,
        "AddressLineOfTINOwner": 1
      }
    },
    "CustomerInformation": {
      "DateOfBirth": "1987-01-01",
      "FirstName": "RIMAS",
      "LastName": "BROWN",
      "Gender": null,
      "PrimaryLanguage": "English",
      "VisaType": null,
      "ForeignTaxID": null,
      "PrimaryPurposeofAccOpening": null,
      "SourceofFunds": {
        "Source": null,
        "MiscDemographic": 2,
        "CustomerIntentforIntWireTransfer": {
          "TransferServices": false,
          "ForeignOutActivity": {
            "OutgoingWiresAmount": null,
            "OutgoingWires": null,
            "ForeignOutgoingActivity": false
          },
          "ForeignInActivity": {
            "IncomingWiresAmount": null,
            "IncomingWires": null,
            "ForeignIncomingActivity": false
          }
        }
      },
      "CISNumber": "",
      "PEP": "No",
      "Address": {
        "StreetAddress1": "456 Massachusetts Ave",
        "CountryCode": "USA",
        "IsForeignAddress": false,
        "City": "Arlington",
        "State": "MA",
        "Zip": "02474"
      },
      "CountryCode": "+1",
      "MobilePhoneNumber": "2077742915",
      "TaxNumber": "454545454",
      "TaxIdType": "SocialSecurityNumber",
      "CitizenshipCode": "USA",
      "BranchNumber": "8161",
      "CostCenterNumber": "161",
      "CategoryCode1": "903",
      "Occupation": "AgricultureOrFishing",
      "Identification": {
        "Status": "NonDocVerification",
        "NonDocumentaryIdentificationInformation1": "VLN"
      },
      "EmailAddress": "ana@v.com",
      "RequestUUID": "a040x000002LtbaAAC"
    },
    "Documents": []
  }
]]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<ee:transform doc:name="SetVariable" doc:id="ec189a5d-f773-4ca1-a560-399be017e8ad">
            <ee:message />
            <ee:variables>
                <ee:set-variable variableName="skipTrueIDResponse"><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_PASS_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_PASS_REASONS')]]></ee:set-variable>
				<ee:set-variable variableName="THREAT_INTELLIGENCE_FAIL_REASONS"><![CDATA[%dw 2.0
output application/json
---
p('variables.THREAT_INTELLIGENCE_FAIL_REASONS')]]></ee:set-variable>
					<ee:set-variable variableName="retSuccMes" ><![CDATA[%dw 2.0
output application/json
---
"Success"]]></ee:set-variable>
					<ee:set-variable variableName="successCode" ><![CDATA[%dw 2.0
output application/json
---
true]]></ee:set-variable>
					<ee:set-variable variableName="IsPartnerRequest" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
					<ee:set-variable variableName="isCaseApprovedFlow" ><![CDATA[%dw 2.0
output application/json
---
false]]></ee:set-variable>
            
</ee:variables>
        </ee:transform>
			
			<flow-ref doc:name="post:\process\submit\submission:velo-process-api-config" doc:id="1b8e8784-b08e-40b4-9da7-4a68942291f5" name="post:\process\submit\submission:velo-process-api-config"/>
		</munit:execution>
		<munit:validation >
			<logger level="INFO" doc:name="Logger" doc:id="0e406283-c235-4229-9fc4-dcf3a9bbf7cc" message="Payload after test suite run #[payload]" />
			<munit-tools:assert-that doc:name="Assert that" doc:id="19153887-1fc2-4403-8460-f55105c6d494" expression="#[payload.data.ApplicationStatus]" is='#[MunitTools::equalTo("Pending")]' message="Terafina SSN Submission flow - Default Choice failed, expected Application status should be Pending" />
		</munit:validation>
	</munit:test>
</mule>
